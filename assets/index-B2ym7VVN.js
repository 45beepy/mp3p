(function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&l(v)}).observe(document,{childList:!0,subtree:!0});function o(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(c){if(c.ep)return;c.ep=!0;const g=o(c);fetch(c.href,g)}})();var N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae={};var be;function Be(){return be||(be=1,(function(A){(function(){var T=function(){this.init()};T.prototype={init:function(){var e=this||o;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator=typeof window<"u"&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||o;if(e=parseFloat(e),t.ctx||m(),typeof e<"u"&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,o.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var d=t._howls[r]._getSoundIds(),s=0;s<d.length;s++){var a=t._howls[r]._soundById(d[s]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||o;t.ctx||m(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,o.ctx.currentTime);for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var d=t._howls[r]._getSoundIds(),s=0;s<d.length;s++){var a=t._howls[r]._soundById(d[s]);a&&a._node&&(a._node.muted=e?!0:a._muted)}return t},stop:function(){for(var e=this||o,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||o,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&typeof e.ctx.close<"u"&&(e.ctx.close(),e.ctx=null,m()),e},codecs:function(e){return(this||o)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||o;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if(typeof Audio<"u")try{var t=new Audio;typeof t.oncanplaythrough>"u"&&(e._canPlayEvent="canplay")}catch{e.noAudio=!0}else e.noAudio=!0;try{var t=new Audio;t.muted&&(e.noAudio=!0)}catch{}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||o,t=null;try{t=typeof Audio<"u"?new Audio:null}catch{return e}if(!t||typeof t.canPlayType!="function")return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),d=e._navigator?e._navigator.userAgent:"",s=d.match(/OPR\/(\d+)/g),a=s&&parseInt(s[0].split("/")[1],10)<33,n=d.indexOf("Safari")!==-1&&d.indexOf("Chrome")===-1,i=d.match(/Version\/(.*?) /),f=n&&i&&parseInt(i[1],10)<15;return e._codecs={mp3:!!(!a&&(r||t.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!f&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!f&&t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||o;if(!(e._audioUnlocked||!e.ctx)){e._audioUnlocked=!1,e.autoUnlock=!1,!e._mobileUnloaded&&e.ctx.sampleRate!==44100&&(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var d=new Audio;d._unlocked=!0,e._releaseHtml5Audio(d)}catch{e.noAudio=!0;break}for(var s=0;s<e._howls.length;s++)if(!e._howls[s]._webAudio)for(var a=e._howls[s]._getSoundIds(),n=0;n<a.length;n++){var i=e._howls[s]._soundById(a[n]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}e._autoResume();var f=e.ctx.createBufferSource();f.buffer=e._scratchBuffer,f.connect(e.ctx.destination),typeof f.start>"u"?f.noteOn(0):f.start(0),typeof e.ctx.resume=="function"&&e.ctx.resume(),f.onended=function(){f.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var u=0;u<e._howls.length;u++)e._howls[u]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||o;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=new Audio().play();return t&&typeof Promise<"u"&&(t instanceof Promise||typeof t.then=="function")&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var t=this||o;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(!(!e.autoSuspend||!e.ctx||typeof e.ctx.suspend>"u"||!o.usingWebAudio)){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio){for(var r=0;r<e._howls[t]._sounds.length;r++)if(!e._howls[t]._sounds[r]._paused)return e}return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var d=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(d,d)}},3e4),e}},_autoResume:function(){var e=this;if(!(!e.ctx||typeof e.ctx.resume>"u"||!o.usingWebAudio))return e.state==="running"&&e.ctx.state!=="interrupted"&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):e.state==="suspended"||e.state==="running"&&e.ctx.state==="interrupted"?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):e.state==="suspending"&&(e._resumeAfterSuspend=!0),e}};var o=new T,l=function(e){var t=this;if(!e.src||e.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}t.init(e)};l.prototype={init:function(e){var t=this;return o.ctx||m(),t._autoplay=e.autoplay||!1,t._format=typeof e.format!="string"?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload=typeof e.preload=="boolean"||e.preload==="metadata"?e.preload:!0,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src=typeof e.src!="string"?e.src:[e.src],t._volume=e.volume!==void 0?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:e.xhr&&e.xhr.withCredentials?e.xhr.withCredentials:!1},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=o.usingWebAudio&&!t._html5,typeof o.ctx<"u"&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t._preload!=="none"&&t.load(),t},load:function(){var e=this,t=null;if(o.noAudio){e._emit("loaderror",null,"No audio support.");return}typeof e._src=="string"&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var d,s;if(e._format&&e._format[r])d=e._format[r];else{if(s=e._src[r],typeof s!="string"){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}d=/^data:audio\/([^;,]+);/i.exec(s),d||(d=/\.([^.]+)$/.exec(s.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),d&&o.codecs(d)){t=e._src[r];break}}if(!t){e._emit("loaderror",null,"No codec support for selected audio sources.");return}return e._src=t,e._state="loading",window.location.protocol==="https:"&&t.slice(0,5)==="http:"&&(e._html5=!0,e._webAudio=!1),new c(e),e._webAudio&&v(e),e},play:function(e,t){var r=this,d=null;if(typeof e=="number")d=e,e=null;else{if(typeof e=="string"&&r._state==="loaded"&&!r._sprite[e])return null;if(typeof e>"u"&&(e="__default",!r._playLock)){for(var s=0,a=0;a<r._sounds.length;a++)r._sounds[a]._paused&&!r._sounds[a]._ended&&(s++,d=r._sounds[a]._id);s===1?e=null:d=null}}var n=d?r._soundById(d):r._inactiveSound();if(!n)return null;if(d&&!e&&(e=n._sprite||"__default"),r._state!=="loaded"){n._sprite=e,n._ended=!1;var i=n._id;return r._queue.push({event:"play",action:function(){r.play(i)}}),i}if(d&&!n._paused)return t||r._loadQueue("play"),n._id;r._webAudio&&o._autoResume();var f=Math.max(0,n._seek>0?n._seek:r._sprite[e][0]/1e3),u=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-f),p=u*1e3/Math.abs(n._rate),y=r._sprite[e][0]/1e3,b=(r._sprite[e][0]+r._sprite[e][1])/1e3;n._sprite=e,n._ended=!1;var S=function(){n._paused=!1,n._seek=f,n._start=y,n._stop=b,n._loop=!!(n._loop||r._sprite[e][2])};if(f>=b){r._ended(n);return}var R=n._node;if(r._webAudio){var C=function(){r._playLock=!1,S(),r._refreshBuffer(n);var B=n._muted||r._muted?0:n._volume;R.gain.setValueAtTime(B,o.ctx.currentTime),n._playStart=o.ctx.currentTime,typeof R.bufferSource.start>"u"?n._loop?R.bufferSource.noteGrainOn(0,f,86400):R.bufferSource.noteGrainOn(0,f,u):n._loop?R.bufferSource.start(0,f,86400):R.bufferSource.start(0,f,u),p!==1/0&&(r._endTimers[n._id]=setTimeout(r._ended.bind(r,n),p)),t||setTimeout(function(){r._emit("play",n._id),r._loadQueue()},0)};o.state==="running"&&o.ctx.state!=="interrupted"?C():(r._playLock=!0,r.once("resume",C),r._clearTimer(n._id))}else{var x=function(){R.currentTime=f,R.muted=n._muted||r._muted||o._muted||R.muted,R.volume=n._volume*o.volume(),R.playbackRate=n._rate;try{var B=R.play();if(B&&typeof Promise<"u"&&(B instanceof Promise||typeof B.then=="function")?(r._playLock=!0,S(),B.then(function(){r._playLock=!1,R._unlocked=!0,t?r._loadQueue():r._emit("play",n._id)}).catch(function(){r._playLock=!1,r._emit("playerror",n._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),n._ended=!0,n._paused=!0})):t||(r._playLock=!1,S(),r._emit("play",n._id)),R.playbackRate=n._rate,R.paused){r._emit("playerror",n._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}e!=="__default"||n._loop?r._endTimers[n._id]=setTimeout(r._ended.bind(r,n),p):(r._endTimers[n._id]=function(){r._ended(n),R.removeEventListener("ended",r._endTimers[n._id],!1)},R.addEventListener("ended",r._endTimers[n._id],!1))}catch(L){r._emit("playerror",n._id,L)}};R.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(R.src=r._src,R.load());var I=window&&window.ejecta||!R.readyState&&o._navigator.isCocoonJS;if(R.readyState>=3||I)x();else{r._playLock=!0,r._state="loading";var O=function(){r._state="loaded",x(),R.removeEventListener(o._canPlayEvent,O,!1)};R.addEventListener(o._canPlayEvent,O,!1),r._clearTimer(n._id)}}return n._id},pause:function(e){var t=this;if(t._state!=="loaded"||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),d=0;d<r.length;d++){t._clearTimer(r[d]);var s=t._soundById(r[d]);if(s&&!s._paused&&(s._seek=t.seek(r[d]),s._rateSeek=0,s._paused=!0,t._stopFade(r[d]),s._node))if(t._webAudio){if(!s._node.bufferSource)continue;typeof s._node.bufferSource.stop>"u"?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),t._cleanBuffer(s._node)}else(!isNaN(s._node.duration)||s._node.duration===1/0)&&s._node.pause();arguments[1]||t._emit("pause",s?s._id:null)}return t},stop:function(e,t){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var d=r._getSoundIds(e),s=0;s<d.length;s++){r._clearTimer(d[s]);var a=r._soundById(d[s]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,r._stopFade(d[s]),a._node&&(r._webAudio?a._node.bufferSource&&(typeof a._node.bufferSource.stop>"u"?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),r._cleanBuffer(a._node)):(!isNaN(a._node.duration)||a._node.duration===1/0)&&(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&r._clearSound(a._node))),t||r._emit("stop",a._id))}return r},mute:function(e,t){var r=this;if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"mute",action:function(){r.mute(e,t)}}),r;if(typeof t>"u")if(typeof e=="boolean")r._muted=e;else return r._muted;for(var d=r._getSoundIds(t),s=0;s<d.length;s++){var a=r._soundById(d[s]);a&&(a._muted=e,a._interval&&r._stopFade(a._id),r._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=o._muted?!0:e),r._emit("mute",a._id))}return r},volume:function(){var e=this,t=arguments,r,d;if(t.length===0)return e._volume;if(t.length===1||t.length===2&&typeof t[1]>"u"){var s=e._getSoundIds(),a=s.indexOf(t[0]);a>=0?d=parseInt(t[0],10):r=parseFloat(t[0])}else t.length>=2&&(r=parseFloat(t[0]),d=parseInt(t[1],10));var n;if(typeof r<"u"&&r>=0&&r<=1){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"volume",action:function(){e.volume.apply(e,t)}}),e;typeof d>"u"&&(e._volume=r),d=e._getSoundIds(d);for(var i=0;i<d.length;i++)n=e._soundById(d[i]),n&&(n._volume=r,t[2]||e._stopFade(d[i]),e._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(r,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=r*o.volume()),e._emit("volume",n._id))}else return n=d?e._soundById(d):e._sounds[0],n?n._volume:0;return e},fade:function(e,t,r,d){var s=this;if(s._state!=="loaded"||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(e,t,r,d)}}),s;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),r=parseFloat(r),s.volume(e,d);for(var a=s._getSoundIds(d),n=0;n<a.length;n++){var i=s._soundById(a[n]);if(i){if(d||s._stopFade(a[n]),s._webAudio&&!i._muted){var f=o.ctx.currentTime,u=f+r/1e3;i._volume=e,i._node.gain.setValueAtTime(e,f),i._node.gain.linearRampToValueAtTime(t,u)}s._startFadeInterval(i,e,t,r,a[n],typeof d>"u")}}return s},_startFadeInterval:function(e,t,r,d,s,a){var n=this,i=t,f=r-t,u=Math.abs(f/.01),p=Math.max(4,u>0?d/u:d),y=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var b=(Date.now()-y)/d;y=Date.now(),i+=f*b,i=Math.round(i*100)/100,f<0?i=Math.max(r,i):i=Math.min(r,i),n._webAudio?e._volume=i:n.volume(i,e._id,!0),a&&(n._volume=i),(r<t&&i<=r||r>t&&i>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,n.volume(r,e._id),n._emit("fade",e._id))},p)},_stopFade:function(e){var t=this,r=t._soundById(e);return r&&r._interval&&(t._webAudio&&r._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(r._interval),r._interval=null,t.volume(r._fadeTo,e),r._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e=this,t=arguments,r,d,s;if(t.length===0)return e._loop;if(t.length===1)if(typeof t[0]=="boolean")r=t[0],e._loop=r;else return s=e._soundById(parseInt(t[0],10)),s?s._loop:!1;else t.length===2&&(r=t[0],d=parseInt(t[1],10));for(var a=e._getSoundIds(d),n=0;n<a.length;n++)s=e._soundById(a[n]),s&&(s._loop=r,e._webAudio&&s._node&&s._node.bufferSource&&(s._node.bufferSource.loop=r,r&&(s._node.bufferSource.loopStart=s._start||0,s._node.bufferSource.loopEnd=s._stop,e.playing(a[n])&&(e.pause(a[n],!0),e.play(a[n],!0)))));return e},rate:function(){var e=this,t=arguments,r,d;if(t.length===0)d=e._sounds[0]._id;else if(t.length===1){var s=e._getSoundIds(),a=s.indexOf(t[0]);a>=0?d=parseInt(t[0],10):r=parseFloat(t[0])}else t.length===2&&(r=parseFloat(t[0]),d=parseInt(t[1],10));var n;if(typeof r=="number"){if(e._state!=="loaded"||e._playLock)return e._queue.push({event:"rate",action:function(){e.rate.apply(e,t)}}),e;typeof d>"u"&&(e._rate=r),d=e._getSoundIds(d);for(var i=0;i<d.length;i++)if(n=e._soundById(d[i]),n){e.playing(d[i])&&(n._rateSeek=e.seek(d[i]),n._playStart=e._webAudio?o.ctx.currentTime:n._playStart),n._rate=r,e._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(r,o.ctx.currentTime):n._node&&(n._node.playbackRate=r);var f=e.seek(d[i]),u=(e._sprite[n._sprite][0]+e._sprite[n._sprite][1])/1e3-f,p=u*1e3/Math.abs(n._rate);(e._endTimers[d[i]]||!n._paused)&&(e._clearTimer(d[i]),e._endTimers[d[i]]=setTimeout(e._ended.bind(e,n),p)),e._emit("rate",n._id)}}else return n=e._soundById(d),n?n._rate:e._rate;return e},seek:function(){var e=this,t=arguments,r,d;if(t.length===0)e._sounds.length&&(d=e._sounds[0]._id);else if(t.length===1){var s=e._getSoundIds(),a=s.indexOf(t[0]);a>=0?d=parseInt(t[0],10):e._sounds.length&&(d=e._sounds[0]._id,r=parseFloat(t[0]))}else t.length===2&&(r=parseFloat(t[0]),d=parseInt(t[1],10));if(typeof d>"u")return 0;if(typeof r=="number"&&(e._state!=="loaded"||e._playLock))return e._queue.push({event:"seek",action:function(){e.seek.apply(e,t)}}),e;var n=e._soundById(d);if(n)if(typeof r=="number"&&r>=0){var i=e.playing(d);i&&e.pause(d,!0),n._seek=r,n._ended=!1,e._clearTimer(d),!e._webAudio&&n._node&&!isNaN(n._node.duration)&&(n._node.currentTime=r);var f=function(){i&&e.play(d,!0),e._emit("seek",d)};if(i&&!e._webAudio){var u=function(){e._playLock?setTimeout(u,0):f()};setTimeout(u,0)}else f()}else if(e._webAudio){var p=e.playing(d)?o.ctx.currentTime-n._playStart:0,y=n._rateSeek?n._rateSeek-n._seek:0;return n._seek+(y+p*Math.abs(n._rate))}else return n._node.currentTime;return e},playing:function(e){var t=this;if(typeof e=="number"){var r=t._soundById(e);return r?!r._paused:!1}for(var d=0;d<t._sounds.length;d++)if(!t._sounds[d]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,d=t._soundById(e);return d&&(r=t._sprite[d._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,r=0;r<t.length;r++)t[r]._paused||e.stop(t[r]._id),e._webAudio||(e._clearSound(t[r]._node),t[r]._node.removeEventListener("error",t[r]._errorFn,!1),t[r]._node.removeEventListener(o._canPlayEvent,t[r]._loadFn,!1),t[r]._node.removeEventListener("ended",t[r]._endFn,!1),o._releaseHtml5Audio(t[r]._node)),delete t[r]._node,e._clearTimer(t[r]._id);var d=o._howls.indexOf(e);d>=0&&o._howls.splice(d,1);var s=!0;for(r=0;r<o._howls.length;r++)if(o._howls[r]._src===e._src||e._src.indexOf(o._howls[r]._src)>=0){s=!1;break}return g&&s&&delete g[e._src],o.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,d){var s=this,a=s["_on"+e];return typeof t=="function"&&a.push(d?{id:r,fn:t,once:d}:{id:r,fn:t}),s},off:function(e,t,r){var d=this,s=d["_on"+e],a=0;if(typeof t=="number"&&(r=t,t=null),t||r)for(a=0;a<s.length;a++){var n=r===s[a].id;if(t===s[a].fn&&n||!t&&n){s.splice(a,1);break}}else if(e)d["_on"+e]=[];else{var i=Object.keys(d);for(a=0;a<i.length;a++)i[a].indexOf("_on")===0&&Array.isArray(d[i[a]])&&(d[i[a]]=[])}return d},once:function(e,t,r){var d=this;return d.on(e,t,r,1),d},_emit:function(e,t,r){for(var d=this,s=d["_on"+e],a=s.length-1;a>=0;a--)(!s[a].id||s[a].id===t||e==="load")&&(setTimeout((function(n){n.call(this,t,r)}).bind(d,s[a].fn),0),s[a].once&&d.off(e,s[a].fn,s[a].id));return d._loadQueue(e),d},_loadQueue:function(e){var t=this;if(t._queue.length>0){var r=t._queue[0];r.event===e&&(t._queue.shift(),t._loadQueue()),e||r.action()}return t},_ended:function(e){var t=this,r=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var d=!!(e._loop||t._sprite[r][2]);if(t._emit("end",e._id),!t._webAudio&&d&&t.stop(e._id,!0).play(e._id),t._webAudio&&d){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=o.ctx.currentTime;var s=(e._stop-e._start)*1e3/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),s)}return t._webAudio&&!d&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),o._autoSuspend()),!t._webAudio&&!d&&t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if(typeof t._endTimers[e]!="function")clearTimeout(t._endTimers[e]);else{var r=t._soundById(e);r&&r._node&&r._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new c(e)},_drain:function(){var e=this,t=e._pool,r=0,d=0;if(!(e._sounds.length<t)){for(d=0;d<e._sounds.length;d++)e._sounds[d]._ended&&r++;for(d=e._sounds.length-1;d>=0;d--){if(r<=t)return;e._sounds[d]._ended&&(e._webAudio&&e._sounds[d]._node&&e._sounds[d]._node.disconnect(0),e._sounds.splice(d,1),r--)}}},_getSoundIds:function(e){var t=this;if(typeof e>"u"){for(var r=[],d=0;d<t._sounds.length;d++)r.push(t._sounds[d]._id);return r}else return[e]},_refreshBuffer:function(e){var t=this;return e._node.bufferSource=o.ctx.createBufferSource(),e._node.bufferSource.buffer=g[t._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,o.ctx.currentTime),t},_cleanBuffer:function(e){var t=this,r=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return t;if(o._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=o._scratchBuffer}catch{}return e.bufferSource=null,t},_clearSound:function(e){var t=/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent);t||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var c=function(e){this._parent=e,this.init()};c.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,r=o._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),e._node.gain.setValueAtTime(r,o.ctx.currentTime),e._node.paused=!0,e._node.connect(o.masterGain)):o.noAudio||(e._node=o._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(o._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=t._preload===!0?"auto":t._preload,e._node.volume=r*o.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++o._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(e._node.duration*10)/10,Object.keys(t._sprite).length===0&&(t._sprite={__default:[0,t._duration*1e3]}),t._state!=="loaded"&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(o._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(e._node.duration*10)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=t._duration*1e3),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var g={},v=function(e){var t=e._src;if(g[t]){e._duration=g[t].duration,h(e);return}if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),d=new Uint8Array(r.length),s=0;s<r.length;++s)d[s]=r.charCodeAt(s);w(d.buffer,e)}else{var a=new XMLHttpRequest;a.open(e._xhr.method,t,!0),a.withCredentials=e._xhr.withCredentials,a.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(n){a.setRequestHeader(n,e._xhr.headers[n])}),a.onload=function(){var n=(a.status+"")[0];if(n!=="0"&&n!=="2"&&n!=="3"){e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".");return}w(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete g[t],e.load())},k(a)}},k=function(e){try{e.send()}catch{e.onerror()}},w=function(e,t){var r=function(){t._emit("loaderror",null,"Decoding audio data failed.")},d=function(s){s&&t._sounds.length>0?(g[t._src]=s,h(t,s)):r()};typeof Promise<"u"&&o.ctx.decodeAudioData.length===1?o.ctx.decodeAudioData(e).then(d).catch(r):o.ctx.decodeAudioData(e,d,r)},h=function(e,t){t&&!e._duration&&(e._duration=t.duration),Object.keys(e._sprite).length===0&&(e._sprite={__default:[0,e._duration*1e3]}),e._state!=="loaded"&&(e._state="loaded",e._emit("load"),e._loadQueue())},m=function(){if(o.usingWebAudio){try{typeof AudioContext<"u"?o.ctx=new AudioContext:typeof webkitAudioContext<"u"?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch{o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),t=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=t?parseInt(t[1],10):null;if(e&&r&&r<9){var d=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!d&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=typeof o.ctx.createGain>"u"?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};A.Howler=o,A.Howl=l,typeof N<"u"?(N.HowlerGlobal=T,N.Howler=o,N.Howl=l,N.Sound=c):typeof window<"u"&&(window.HowlerGlobal=T,window.Howler=o,window.Howl=l,window.Sound=c)})();(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(o){var l=this;if(!l.ctx||!l.ctx.listener)return l;for(var c=l._howls.length-1;c>=0;c--)l._howls[c].stereo(o);return l},HowlerGlobal.prototype.pos=function(o,l,c){var g=this;if(!g.ctx||!g.ctx.listener)return g;if(l=typeof l!="number"?g._pos[1]:l,c=typeof c!="number"?g._pos[2]:c,typeof o=="number")g._pos=[o,l,c],typeof g.ctx.listener.positionX<"u"?(g.ctx.listener.positionX.setTargetAtTime(g._pos[0],Howler.ctx.currentTime,.1),g.ctx.listener.positionY.setTargetAtTime(g._pos[1],Howler.ctx.currentTime,.1),g.ctx.listener.positionZ.setTargetAtTime(g._pos[2],Howler.ctx.currentTime,.1)):g.ctx.listener.setPosition(g._pos[0],g._pos[1],g._pos[2]);else return g._pos;return g},HowlerGlobal.prototype.orientation=function(o,l,c,g,v,k){var w=this;if(!w.ctx||!w.ctx.listener)return w;var h=w._orientation;if(l=typeof l!="number"?h[1]:l,c=typeof c!="number"?h[2]:c,g=typeof g!="number"?h[3]:g,v=typeof v!="number"?h[4]:v,k=typeof k!="number"?h[5]:k,typeof o=="number")w._orientation=[o,l,c,g,v,k],typeof w.ctx.listener.forwardX<"u"?(w.ctx.listener.forwardX.setTargetAtTime(o,Howler.ctx.currentTime,.1),w.ctx.listener.forwardY.setTargetAtTime(l,Howler.ctx.currentTime,.1),w.ctx.listener.forwardZ.setTargetAtTime(c,Howler.ctx.currentTime,.1),w.ctx.listener.upX.setTargetAtTime(g,Howler.ctx.currentTime,.1),w.ctx.listener.upY.setTargetAtTime(v,Howler.ctx.currentTime,.1),w.ctx.listener.upZ.setTargetAtTime(k,Howler.ctx.currentTime,.1)):w.ctx.listener.setOrientation(o,l,c,g,v,k);else return h;return w},Howl.prototype.init=(function(o){return function(l){var c=this;return c._orientation=l.orientation||[1,0,0],c._stereo=l.stereo||null,c._pos=l.pos||null,c._pannerAttr={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:360,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:360,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:0,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:"inverse",maxDistance:typeof l.maxDistance<"u"?l.maxDistance:1e4,panningModel:typeof l.panningModel<"u"?l.panningModel:"HRTF",refDistance:typeof l.refDistance<"u"?l.refDistance:1,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:1},c._onstereo=l.onstereo?[{fn:l.onstereo}]:[],c._onpos=l.onpos?[{fn:l.onpos}]:[],c._onorientation=l.onorientation?[{fn:l.onorientation}]:[],o.call(this,l)}})(Howl.prototype.init),Howl.prototype.stereo=function(o,l){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"stereo",action:function(){c.stereo(o,l)}}),c;var g=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof l>"u")if(typeof o=="number")c._stereo=o,c._pos=[o,0,0];else return c._stereo;for(var v=c._getSoundIds(l),k=0;k<v.length;k++){var w=c._soundById(v[k]);if(w)if(typeof o=="number")w._stereo=o,w._pos=[o,0,0],w._node&&(w._pannerAttr.panningModel="equalpower",(!w._panner||!w._panner.pan)&&T(w,g),g==="spatial"?typeof w._panner.positionX<"u"?(w._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),w._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),w._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):w._panner.setPosition(o,0,0):w._panner.pan.setValueAtTime(o,Howler.ctx.currentTime)),c._emit("stereo",w._id);else return w._stereo}return c},Howl.prototype.pos=function(o,l,c,g){var v=this;if(!v._webAudio)return v;if(v._state!=="loaded")return v._queue.push({event:"pos",action:function(){v.pos(o,l,c,g)}}),v;if(l=typeof l!="number"?0:l,c=typeof c!="number"?-.5:c,typeof g>"u")if(typeof o=="number")v._pos=[o,l,c];else return v._pos;for(var k=v._getSoundIds(g),w=0;w<k.length;w++){var h=v._soundById(k[w]);if(h)if(typeof o=="number")h._pos=[o,l,c],h._node&&((!h._panner||h._panner.pan)&&T(h,"spatial"),typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(o,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(l,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(c,Howler.ctx.currentTime)):h._panner.setPosition(o,l,c)),v._emit("pos",h._id);else return h._pos}return v},Howl.prototype.orientation=function(o,l,c,g){var v=this;if(!v._webAudio)return v;if(v._state!=="loaded")return v._queue.push({event:"orientation",action:function(){v.orientation(o,l,c,g)}}),v;if(l=typeof l!="number"?v._orientation[1]:l,c=typeof c!="number"?v._orientation[2]:c,typeof g>"u")if(typeof o=="number")v._orientation=[o,l,c];else return v._orientation;for(var k=v._getSoundIds(g),w=0;w<k.length;w++){var h=v._soundById(k[w]);if(h)if(typeof o=="number")h._orientation=[o,l,c],h._node&&(h._panner||(h._pos||(h._pos=v._pos||[0,0,-.5]),T(h,"spatial")),typeof h._panner.orientationX<"u"?(h._panner.orientationX.setValueAtTime(o,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(l,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(c,Howler.ctx.currentTime)):h._panner.setOrientation(o,l,c)),v._emit("orientation",h._id);else return h._orientation}return v},Howl.prototype.pannerAttr=function(){var o=this,l=arguments,c,g,v;if(!o._webAudio)return o;if(l.length===0)return o._pannerAttr;if(l.length===1)if(typeof l[0]=="object")c=l[0],typeof g>"u"&&(c.pannerAttr||(c.pannerAttr={coneInnerAngle:c.coneInnerAngle,coneOuterAngle:c.coneOuterAngle,coneOuterGain:c.coneOuterGain,distanceModel:c.distanceModel,maxDistance:c.maxDistance,refDistance:c.refDistance,rolloffFactor:c.rolloffFactor,panningModel:c.panningModel}),o._pannerAttr={coneInnerAngle:typeof c.pannerAttr.coneInnerAngle<"u"?c.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:typeof c.pannerAttr.coneOuterAngle<"u"?c.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:typeof c.pannerAttr.coneOuterGain<"u"?c.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:typeof c.pannerAttr.distanceModel<"u"?c.pannerAttr.distanceModel:o._distanceModel,maxDistance:typeof c.pannerAttr.maxDistance<"u"?c.pannerAttr.maxDistance:o._maxDistance,refDistance:typeof c.pannerAttr.refDistance<"u"?c.pannerAttr.refDistance:o._refDistance,rolloffFactor:typeof c.pannerAttr.rolloffFactor<"u"?c.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:typeof c.pannerAttr.panningModel<"u"?c.pannerAttr.panningModel:o._panningModel});else return v=o._soundById(parseInt(l[0],10)),v?v._pannerAttr:o._pannerAttr;else l.length===2&&(c=l[0],g=parseInt(l[1],10));for(var k=o._getSoundIds(g),w=0;w<k.length;w++)if(v=o._soundById(k[w]),v){var h=v._pannerAttr;h={coneInnerAngle:typeof c.coneInnerAngle<"u"?c.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:typeof c.coneOuterAngle<"u"?c.coneOuterAngle:h.coneOuterAngle,coneOuterGain:typeof c.coneOuterGain<"u"?c.coneOuterGain:h.coneOuterGain,distanceModel:typeof c.distanceModel<"u"?c.distanceModel:h.distanceModel,maxDistance:typeof c.maxDistance<"u"?c.maxDistance:h.maxDistance,refDistance:typeof c.refDistance<"u"?c.refDistance:h.refDistance,rolloffFactor:typeof c.rolloffFactor<"u"?c.rolloffFactor:h.rolloffFactor,panningModel:typeof c.panningModel<"u"?c.panningModel:h.panningModel};var m=v._panner;m||(v._pos||(v._pos=o._pos||[0,0,-.5]),T(v,"spatial"),m=v._panner),m.coneInnerAngle=h.coneInnerAngle,m.coneOuterAngle=h.coneOuterAngle,m.coneOuterGain=h.coneOuterGain,m.distanceModel=h.distanceModel,m.maxDistance=h.maxDistance,m.refDistance=h.refDistance,m.rolloffFactor=h.rolloffFactor,m.panningModel=h.panningModel}return o},Sound.prototype.init=(function(o){return function(){var l=this,c=l._parent;l._orientation=c._orientation,l._stereo=c._stereo,l._pos=c._pos,l._pannerAttr=c._pannerAttr,o.call(this),l._stereo?c.stereo(l._stereo):l._pos&&c.pos(l._pos[0],l._pos[1],l._pos[2],l._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(o){return function(){var l=this,c=l._parent;return l._orientation=c._orientation,l._stereo=c._stereo,l._pos=c._pos,l._pannerAttr=c._pannerAttr,l._stereo?c.stereo(l._stereo):l._pos?c.pos(l._pos[0],l._pos[1],l._pos[2],l._id):l._panner&&(l._panner.disconnect(0),l._panner=void 0,c._refreshBuffer(l)),o.call(this)}})(Sound.prototype.reset);var T=function(o,l){l=l||"spatial",l==="spatial"?(o._panner=Howler.ctx.createPanner(),o._panner.coneInnerAngle=o._pannerAttr.coneInnerAngle,o._panner.coneOuterAngle=o._pannerAttr.coneOuterAngle,o._panner.coneOuterGain=o._pannerAttr.coneOuterGain,o._panner.distanceModel=o._pannerAttr.distanceModel,o._panner.maxDistance=o._pannerAttr.maxDistance,o._panner.refDistance=o._pannerAttr.refDistance,o._panner.rolloffFactor=o._pannerAttr.rolloffFactor,o._panner.panningModel=o._pannerAttr.panningModel,typeof o._panner.positionX<"u"?(o._panner.positionX.setValueAtTime(o._pos[0],Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(o._pos[1],Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(o._pos[2],Howler.ctx.currentTime)):o._panner.setPosition(o._pos[0],o._pos[1],o._pos[2]),typeof o._panner.orientationX<"u"?(o._panner.orientationX.setValueAtTime(o._orientation[0],Howler.ctx.currentTime),o._panner.orientationY.setValueAtTime(o._orientation[1],Howler.ctx.currentTime),o._panner.orientationZ.setValueAtTime(o._orientation[2],Howler.ctx.currentTime)):o._panner.setOrientation(o._orientation[0],o._orientation[1],o._orientation[2])):(o._panner=Howler.ctx.createStereoPanner(),o._panner.pan.setValueAtTime(o._stereo,Howler.ctx.currentTime)),o._panner.connect(o._node),o._paused||o._parent.pause(o._id,!0).play(o._id,!0)}})()})(ae)),ae}var Pe=Be();function Q(A){throw new Error('Could not dynamically require "'+A+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var J={exports:{}},Me=J.exports,Te;function Fe(){return Te||(Te=1,(function(A,T){var o=o||{};o.scope={},o.ASSUME_ES5=!1,o.ASSUME_NO_NATIVE_MAP=!1,o.ASSUME_NO_NATIVE_SET=!1,o.defineProperty=o.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(l,c,g){l!=Array.prototype&&l!=Object.prototype&&(l[c]=g.value)},o.getGlobal=function(l){return typeof window<"u"&&window===l?l:typeof N<"u"&&N!=null?N:l},o.global=o.getGlobal(Me),o.polyfill=function(l,c,g,v){if(c){for(g=o.global,l=l.split("."),v=0;v<l.length-1;v++){var k=l[v];k in g||(g[k]={}),g=g[k]}l=l[l.length-1],v=g[l],c=c(v),c!=v&&c!=null&&o.defineProperty(g,l,{configurable:!0,writable:!0,value:c})}},o.polyfill("Object.setPrototypeOf",function(l){return l||(typeof"".__proto__!="object"?null:function(c,g){if(c.__proto__=g,c.__proto__!==g)throw new TypeError(c+" is not extensible");return c})},"es6","es5"),o.objectCreate=o.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(l){var c=function(){};return c.prototype=l,new c},o.construct=typeof Reflect<"u"&&Reflect.construct||function(l,c,g){return g===void 0&&(g=l),g=o.objectCreate(g.prototype||Object.prototype),Function.prototype.apply.call(l,g,c)||g},o.polyfill("Reflect.construct",function(l){return l||o.construct},"es6","es3"),(function(l){A.exports=l()})(function(){return(function(){function l(c,g,v){function k(m,e){if(!g[m]){if(!c[m]){var t=typeof Q=="function"&&Q;if(!e&&t)return t(m,!0);if(w)return w(m,!0);throw e=Error("Cannot find module '"+m+"'"),e.code="MODULE_NOT_FOUND",e}e=g[m]={exports:{}},c[m][0].call(e.exports,function(r){return k(c[m][1][r]||r)},e,e.exports,l,c,g,v)}return g[m].exports}for(var w=typeof Q=="function"&&Q,h=0;h<v.length;h++)k(v[h]);return k}return l})()({1:[function(l,c,g){},{}],2:[function(l,c,g){c.exports=XMLHttpRequest},{}],3:[function(l,c,g){function v(a){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v(a)}function k(a,n){for(var i=0;i<n.length;i++){var f=n[i];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function w(a,n,i){return n&&k(a.prototype,n),i&&k(a,i),a}function h(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),n&&m(a,n)}function m(a,n){return m=Object.setPrototypeOf||function(i,f){return i.__proto__=f,i},m(a,n)}function e(a){var n=r();return function(){var i=d(a);if(n){var f=d(this).constructor;i=Reflect.construct(i,arguments,f)}else i=i.apply(this,arguments);return i=!i||v(i)!=="object"&&typeof i!="function"?t(this):i,i}}function t(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},d(a)}function s(a,n,i){return n in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}l=(function(a){function n(f){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var u=i.call(this);return s(t(u),"_array",void 0),s(t(u),"_size",void 0),u._array=f,u._size=f.length,u._isInitialized=!0,u}h(n,a);var i=e(n);return w(n,[{key:"init",value:function(f){setTimeout(f.onSuccess,0)}},{key:"loadRange",value:function(f,u){setTimeout(u.onSuccess,0)}},{key:"getByteAt",value:function(f){if(f>=this._array.length)throw Error("Offset "+f+" hasn't been loaded yet.");return this._array[f]}}],[{key:"canReadFile",value:function(f){return Array.isArray(f)||typeof Buffer=="function"&&Buffer.isBuffer(f)}}]),n})(l("./MediaFileReader")),c.exports=l},{"./MediaFileReader":11}],4:[function(l,c,g){function v(n){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},v(n)}function k(n,i){for(var f=0;f<i.length;f++){var u=i[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function w(n,i,f){return i&&k(n.prototype,i),f&&k(n,f),n}function h(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&m(n,i)}function m(n,i){return m=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},m(n,i)}function e(n){var i=r();return function(){var f=d(n);if(i){var u=d(this).constructor;f=Reflect.construct(f,arguments,u)}else f=f.apply(this,arguments);return f=!f||v(f)!=="object"&&typeof f!="function"?t(this):f,f}}function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(n){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},d(n)}function s(n,i,f){return i in n?Object.defineProperty(n,i,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[i]=f,n}var a=l("./ChunkedFileData");l=(function(n){function i(u){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var p=f.call(this);return s(t(p),"_blob",void 0),s(t(p),"_fileData",void 0),p._blob=u,p._fileData=new a,p}h(i,n);var f=e(i);return w(i,[{key:"_init",value:function(u){this._size=this._blob.size,setTimeout(u.onSuccess,1)}},{key:"loadRange",value:function(u,p){var y=this,b=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,u[0],u[1]+1),S=new FileReader;S.onloadend=function(R){R=new Uint8Array(S.result),y._fileData.addData(u[0],R),p.onSuccess()},S.onerror=S.onabort=function(R){p.onError&&p.onError({type:"blob",info:S.error})},S.readAsArrayBuffer(b)}},{key:"getByteAt",value:function(u){return this._fileData.getByteAt(u)}}],[{key:"canReadFile",value:function(u){return typeof Blob<"u"&&u instanceof Blob||typeof File<"u"&&u instanceof File}}]),i})(l("./MediaFileReader")),c.exports=l},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(l,c,g){function v(w,h){for(var m=0;m<h.length;m++){var e=h[m];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(w,e.key,e)}}function k(w,h,m){return h&&v(w.prototype,h),m&&v(w,m),w}l=(function(){function w(){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");"_fileData"in this?Object.defineProperty(this,"_fileData",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this._fileData=void 0,this._fileData=[]}return k(w,[{key:"addData",value:function(h,m){var e=h+m.length-1,t=this._getChunkRange(h,e);if(t.startIx===-1)this._fileData.splice(t.insertIx||0,0,{offset:h,data:m});else{var r=this._fileData[t.startIx],d=this._fileData[t.endIx];e=e<d.offset+d.data.length-1;var s={offset:Math.min(h,r.offset),data:m};h>r.offset&&(h=this._sliceData(r.data,0,h-r.offset),s.data=this._concatData(h,m)),e&&(h=this._sliceData(s.data,0,d.offset-s.offset),s.data=this._concatData(h,d.data)),this._fileData.splice(t.startIx,t.endIx-t.startIx+1,s)}}},{key:"_concatData",value:function(h,m){if(typeof ArrayBuffer<"u"&&ArrayBuffer.isView&&ArrayBuffer.isView(h)){var e=new h.constructor(h.length+m.length);return e.set(h,0),e.set(m,h.length),e}return h.concat(m)}},{key:"_sliceData",value:function(h,m,e){return h.slice?h.slice(m,e):h.subarray(m,e)}},{key:"_getChunkRange",value:function(h,m){for(var e,t,r=-1,d=-1,s=0,a=0;a<this._fileData.length&&(t=this._fileData[a].offset,e=t+this._fileData[a].data.length,!(m<t-1));a++,s=a)if(h<=e+1&&m>=t-1){r=a;break}if(r===-1)return{startIx:-1,endIx:-1,insertIx:s};for(a=r;a<this._fileData.length&&(t=this._fileData[a].offset,e=t+this._fileData[a].data.length,m>=t-1&&(d=a),!(m<=e+1));a++);return d===-1&&(d=r),{startIx:r,endIx:d}}},{key:"hasDataRange",value:function(h,m){for(var e=0;e<this._fileData.length;e++){var t=this._fileData[e];if(m<t.offset)break;if(h>=t.offset&&m<t.offset+t.data.length)return!0}return!1}},{key:"getByteAt",value:function(h){for(var m,e=0;e<this._fileData.length;e++){var t=this._fileData[e].offset,r=t+this._fileData[e].data.length-1;if(h>=t&&h<=r){m=this._fileData[e];break}}if(m)return m.data[h-m.offset];throw Error("Offset "+h+" hasn't been loaded yet.")}}],[{key:"NOT_FOUND",get:function(){return-1}}]),w})(),c.exports=l},{}],6:[function(l,c,g){function v(f){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},v(f)}function k(f,u){for(var p=0;p<u.length;p++){var y=u[p];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,y.key,y)}}function w(f,u,p){return u&&k(f.prototype,u),p&&k(f,p),f}function h(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(u&&u.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),u&&m(f,u)}function m(f,u){return m=Object.setPrototypeOf||function(p,y){return p.__proto__=y,p},m(f,u)}function e(f){var u=r();return function(){var p=d(f);if(u){var y=d(this).constructor;p=Reflect.construct(p,arguments,y)}else p=p.apply(this,arguments);return p=!p||v(p)!=="object"&&typeof p!="function"?t(this):p,p}}function t(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(f){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},d(f)}function s(f,u,p){return u in f?Object.defineProperty(f,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[u]=p,f}var a=[4,132],n=[6,134],i="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");l=(function(f){function u(){if(!(this instanceof u))throw new TypeError("Cannot call a class as a function");for(var y=arguments.length,b=Array(y),S=0;S<y;S++)b[S]=arguments[S];return y=p.call.apply(p,[this].concat(b)),s(t(y),"_commentOffset",void 0),s(t(y),"_pictureOffset",void 0),y}h(u,f);var p=e(u);return w(u,[{key:"_loadData",value:function(y,b){var S=this;y.loadRange([4,7],{onSuccess:function(){S._loadBlock(y,4,b)}})}},{key:"_loadBlock",value:function(y,b,S){var R=this,C=y.getByteAt(b),x=y.getInteger24At(b+1,!0);if(a.indexOf(C)!==-1){var I=b+4;y.loadRange([I,I+x],{onSuccess:function(){R._commentOffset=I,R._nextBlock(y,b,C,x,S)}})}else n.indexOf(C)!==-1?(I=b+4,y.loadRange([I,I+x],{onSuccess:function(){R._pictureOffset=I,R._nextBlock(y,b,C,x,S)}})):R._nextBlock(y,b,C,x,S)}},{key:"_nextBlock",value:function(y,b,S,R,C){var x=this;127<S?x._commentOffset?C.onSuccess():C.onError({type:"loadData",info:"Comment block could not be found."}):y.loadRange([b+4+R,b+4+4+R],{onSuccess:function(){x._loadBlock(y,b+4+R,C)}})}},{key:"_parseData",value:function(y,b){var S=y.getLongAt(this._commentOffset,!1)+(this._commentOffset+4);b=y.getLongAt(S,!1),S+=4;for(var R,C,x,I,O,B,L=0;L<b;L++){var F=y.getLongAt(S,!1),M=y.getStringWithCharsetAt(S+4,F,"utf-8").toString(),Ae=M.indexOf("=");switch(M=[M.slice(0,Ae),M.slice(Ae+1)],M[0].toUpperCase()){case"TITLE":R=M[1];break;case"ARTIST":C=M[1];break;case"ALBUM":x=M[1];break;case"TRACKNUMBER":I=M[1];break;case"GENRE":O=M[1]}S+=4+F}return this._pictureOffset&&(B=y.getLongAt(this._pictureOffset,!0),b=this._pictureOffset+4,S=y.getLongAt(b,!0),L=b+4,b=y.getStringAt(L,S),S=L+S,L=y.getLongAt(S,!0),F=S+4,S=y.getStringWithCharsetAt(F,L,"utf-8").toString(),L=F+L+16,F=y.getLongAt(L,!0),y=y.getBytesAt(L+4,F,!0),B={format:b,type:i[B],description:S,data:y}),{type:"FLAC",version:"1",tags:{title:R,artist:C,album:x,track:I,genre:O,picture:B}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(y){return String.fromCharCode.apply(String,y.slice(0,4))==="fLaC"}}]),u})(l("./MediaTagReader")),c.exports=l},{"./MediaTagReader":12}],7:[function(l,c,g){function v(s){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},v(s)}function k(s,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function w(s,a,n){return a&&k(s.prototype,a),n&&k(s,n),s}function h(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),a&&m(s,a)}function m(s,a){return m=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},m(s,a)}function e(s){var a=t();return function(){var n=r(s);if(a){var i=r(this).constructor;n=Reflect.construct(n,arguments,i)}else n=n.apply(this,arguments);if(!n||v(n)!=="object"&&typeof n!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=this}return n}}function t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r(s){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},r(s)}g=l("./MediaTagReader"),l("./MediaFileReader"),l=(function(s){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");return n.apply(this,arguments)}h(a,s);var n=e(a);return w(a,[{key:"_loadData",value:function(i,f){var u=i.getSize();i.loadRange([u-128,u-1],f)}},{key:"_parseData",value:function(i,f){var u=i.getSize()-128,p=i.getStringWithCharsetAt(u+3,30).toString(),y=i.getStringWithCharsetAt(u+33,30).toString(),b=i.getStringWithCharsetAt(u+63,30).toString(),S=i.getStringWithCharsetAt(u+93,4).toString(),R=i.getByteAt(u+97+28);if(f=i.getByteAt(u+97+29),R==0&&f!=0){var C="1.1";R=i.getStringWithCharsetAt(u+97,28).toString()}else C="1.0",R=i.getStringWithCharsetAt(u+97,30).toString(),f=0;return i=i.getByteAt(u+97+30),i={type:"ID3",version:C,tags:{title:p,artist:y,album:b,year:S,comment:R,genre:255>i?d[i]:""}},f&&(i.tags.track=f),i}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(i){return String.fromCharCode.apply(String,i.slice(0,3))==="TAG"}}]),a})(g);var d="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");c.exports=l},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(l,c,g){function v(s,a){for(var n=0;n<a.length;n++){var i=a[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function k(s,a,n){return n&&v(s,n),s}function w(s){switch(s){case 0:s="iso-8859-1";break;case 1:s="utf-16";break;case 2:s="utf-16be";break;case 3:s="utf-8";break;default:s="iso-8859-1"}return s}function h(s,a,n,i){var f=n.getStringWithCharsetAt(s+1,a-1,i);return s=n.getStringWithCharsetAt(s+1+f.bytesReadCount,a-1-f.bytesReadCount,i),{user_description:f.toString(),data:s.toString()}}l("./MediaFileReader");var m=l("./StringUtils"),e=l("./ArrayFileReader"),t={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};l=(function(){function s(){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function")}return k(s,null,[{key:"getFrameReaderFunction",value:function(a){return a in r?r[a]:a[0]==="T"?r["T*"]:a[0]==="W"?r["W*"]:null}},{key:"readFrames",value:function(a,n,i,f,u){for(var p={},y=this._getFrameHeaderSize(f);a<n-y;){var b=this._readFrameHeader(i,a,f),S=b.id;if(!S)break;var R=b.flags,C=b.size,x=a+b.headerSize,I=i;if(a+=b.headerSize+b.size,!u||u.indexOf(S)!==-1){if(S==="MP3e"||S==="\0MP3"||S==="\0\0MP"||S===" MP3")break;R&&R.format.unsynchronisation&&!f.flags.unsynchronisation&&(I=this.getUnsyncFileReader(I,x,C),x=0,C=I.getSize()),R&&R.format.data_length_indicator&&(x+=4,C-=4),R=(b=s.getFrameReaderFunction(S))?b.apply(this,[x,C,I,R,f]):null,x=this._getFrameDescription(S),C={id:S,size:C,description:x,data:R},S in p?(p[S].id&&(p[S]=[p[S]]),p[S].push(C)):p[S]=C}}return p}},{key:"_getFrameHeaderSize",value:function(a){return a=a.major,a==2?6:a==3||a==4?10:0}},{key:"_readFrameHeader",value:function(a,n,i){var f=i.major,u=null;switch(i=this._getFrameHeaderSize(i),f){case 2:var p=a.getStringAt(n,3),y=a.getInteger24At(n+3,!0);break;case 3:p=a.getStringAt(n,4),y=a.getLongAt(n+4,!0);break;case 4:p=a.getStringAt(n,4),y=a.getSynchsafeInteger32At(n+4)}return(p=="\0\0\0"||p=="\0\0\0\0")&&(p=""),p&&2<f&&(u=this._readFrameFlags(a,n+8)),{id:p||"",size:y||0,headerSize:i||0,flags:u}}},{key:"_readFrameFlags",value:function(a,n){return{message:{tag_alter_preservation:a.isBitSetAt(n,6),file_alter_preservation:a.isBitSetAt(n,5),read_only:a.isBitSetAt(n,4)},format:{grouping_identity:a.isBitSetAt(n+1,7),compression:a.isBitSetAt(n+1,3),encryption:a.isBitSetAt(n+1,2),unsynchronisation:a.isBitSetAt(n+1,1),data_length_indicator:a.isBitSetAt(n+1,0)}}}},{key:"_getFrameDescription",value:function(a){return a in t?t[a]:"Unknown"}},{key:"getUnsyncFileReader",value:function(a,n,i){for(a=a.getBytesAt(n,i),n=0;n<a.length-1;n++)a[n]===255&&a[n+1]===0&&a.splice(n+1,1);return new e(a)}}]),s})();var r={APIC:function(s,a,n,i,f){i=s;var u=w(n.getByteAt(s));switch(f&&f.major){case 2:f=n.getStringAt(s+1,3),s+=4;break;case 3:case 4:f=n.getStringWithCharsetAt(s+1,a-1),s+=1+f.bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var p=n.getByteAt(s);return p=d[p],u=n.getStringWithCharsetAt(s+1,a-(s-i)-1,u),s+=1+u.bytesReadCount,{format:f.toString(),type:p,description:u.toString(),data:n.getBytesAt(s,i+a-s)}},CHAP:function(s,a,n,i,f){i=s;var u={},p=m.readNullTerminatedString(n.getBytesAt(s,a));return u.id=p.toString(),s+=p.bytesReadCount,u.startTime=n.getLongAt(s,!0),s+=4,u.endTime=n.getLongAt(s,!0),s+=4,u.startOffset=n.getLongAt(s,!0),s+=4,u.endOffset=n.getLongAt(s,!0),s+=4,u.subFrames=this.readFrames(s,s+(a-(s-i)),n,f),u},CTOC:function(s,a,n,i,f){i=s;var u={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},p=m.readNullTerminatedString(n.getBytesAt(s,a));for(u.id=p.toString(),s+=p.bytesReadCount,u.topLevel=n.isBitSetAt(s,1),u.ordered=n.isBitSetAt(s,0),s++,u.entryCount=n.getByteAt(s),s++,p=0;p<u.entryCount;p++){var y=m.readNullTerminatedString(n.getBytesAt(s,a-(s-i)));u.childElementIds.push(y.toString()),s+=y.bytesReadCount}return u.subFrames=this.readFrames(s,s+(a-(s-i)),n,f),u},COMM:function(s,a,n,i,f){var u=s,p=w(n.getByteAt(s));return i=n.getStringAt(s+1,3),f=n.getStringWithCharsetAt(s+4,a-4,p),s+=4+f.bytesReadCount,s=n.getStringWithCharsetAt(s,u+a-s,p),{language:i,short_description:f.toString(),text:s.toString()}}};r.COM=r.COMM,r.PIC=function(s,a,n,i,f){return r.APIC(s,a,n,i,f)},r.PCNT=function(s,a,n,i,f){return n.getLongAt(s,!1)},r.CNT=r.PCNT,r["T*"]=function(s,a,n,i,f){return i=w(n.getByteAt(s)),n.getStringWithCharsetAt(s+1,a-1,i).toString()},r.TXXX=function(s,a,n,i,f){return i=w(n.getByteAt(s)),h(s,a,n,i)},r.WXXX=function(s,a,n,i,f){return a===0?null:(i=w(n.getByteAt(s)),h(s,a,n,i))},r["W*"]=function(s,a,n,i,f){return a===0?null:n.getStringWithCharsetAt(s,a,"iso-8859-1").toString()},r.TCON=function(s,a,n,i){return r["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},r.TCO=r.TCON,r.USLT=function(s,a,n,i,f){var u=s,p=w(n.getByteAt(s));return i=n.getStringAt(s+1,3),f=n.getStringWithCharsetAt(s+4,a-4,p),s+=4+f.bytesReadCount,s=n.getStringWithCharsetAt(s,u+a-s,p),{language:i,descriptor:f.toString(),lyrics:s.toString()}},r.ULT=r.USLT,r.UFID=function(s,a,n,i,f){return i=m.readNullTerminatedString(n.getBytesAt(s,a)),s+=i.bytesReadCount,s=n.getBytesAt(s,a-i.bytesReadCount),{ownerIdentifier:i.toString(),identifier:s}};var d="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");c.exports=l},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(l,c,g){function v(a){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},v(a)}function k(a,n){for(var i=0;i<n.length;i++){var f=n[i];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(a,f.key,f)}}function w(a,n,i){return n&&k(a.prototype,n),i&&k(a,i),a}function h(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),n&&m(a,n)}function m(a,n){return m=Object.setPrototypeOf||function(i,f){return i.__proto__=f,i},m(a,n)}function e(a){var n=t();return function(){var i=r(a);if(n){var f=r(this).constructor;i=Reflect.construct(i,arguments,f)}else i=i.apply(this,arguments);if(!i||v(i)!=="object"&&typeof i!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");i=this}return i}}function t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r(a){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},r(a)}g=l("./MediaTagReader"),l("./MediaFileReader");var d=l("./ID3v2FrameReader");l=(function(a){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");return i.apply(this,arguments)}h(n,a);var i=e(n);return w(n,[{key:"_loadData",value:function(f,u){f.loadRange([6,9],{onSuccess:function(){f.loadRange([0,10+f.getSynchsafeInteger32At(6)-1],u)},onError:u.onError})}},{key:"_parseData",value:function(f,u){var p,y=0,b=f.getByteAt(y+3);if(4<b)return{type:"ID3",version:">2.4",tags:{}};var S=f.getByteAt(y+4),R=f.isBitSetAt(y+5,7),C=f.isBitSetAt(y+5,6),x=f.isBitSetAt(y+5,5),I=f.getSynchsafeInteger32At(y+6);if(y+=10,C)if(b===4){var O=f.getSynchsafeInteger32At(y);y+=O}else O=f.getLongAt(y,!0),y+=O+4;O={type:"ID3",version:"2."+b+"."+S,major:b,revision:S,flags:{unsynchronisation:R,extended_header:C,experimental_indicator:x,footer_present:!1},size:I,tags:{}},u&&(p=this._expandShortcutTags(u)),u=I+10,O.flags.unsynchronisation&&(f=d.getUnsyncFileReader(f,y,I),y=0,u=f.getSize()),f=d.readFrames(y,u,f,O,p);for(var B in s)s.hasOwnProperty(B)&&(p=this._getFrameData(f,s[B]))&&(O.tags[B]=p);for(var L in f)f.hasOwnProperty(L)&&(O.tags[L]=f[L]);return O}},{key:"_getFrameData",value:function(f,u){for(var p=0,y;y=u[p];p++)if(y in f)return f=f[y]instanceof Array?f[y][0]:f[y],f.data}},{key:"getShortcuts",value:function(){return s}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(f){return String.fromCharCode.apply(String,f.slice(0,3))==="ID3"}}]),n})(g);var s={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};c.exports=l},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(l,c,g){function v(n){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},v(n)}function k(n,i){for(var f=0;f<i.length;f++){var u=i[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function w(n,i,f){return i&&k(n.prototype,i),f&&k(n,f),n}function h(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&m(n,i)}function m(n,i){return m=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},m(n,i)}function e(n){var i=t();return function(){var f=r(n);if(i){var u=r(this).constructor;f=Reflect.construct(f,arguments,u)}else f=f.apply(this,arguments);if(!f||v(f)!=="object"&&typeof f!="function"){if(this===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=this}return f}}function t(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r(n){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},r(n)}g=l("./MediaTagReader"),l("./MediaFileReader"),l=(function(n){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");return f.apply(this,arguments)}h(i,n);var f=e(i);return w(i,[{key:"_loadData",value:function(u,p){var y=this;u.loadRange([0,16],{onSuccess:function(){y._loadAtom(u,0,"",p)},onError:p.onError})}},{key:"_loadAtom",value:function(u,p,y,b){if(p>=u.getSize())b.onSuccess();else{var S=this,R=u.getLongAt(p,!0);if(R==0||isNaN(R))b.onSuccess();else{var C=u.getStringAt(p+4,4);if(this._isContainerAtom(C)){C=="meta"&&(p+=4);var x=(y?y+".":"")+C;x==="moov.udta.meta.ilst"?u.loadRange([p,p+R],b):u.loadRange([p+8,p+8+8],{onSuccess:function(){S._loadAtom(u,p+8,x,b)},onError:b.onError})}else u.loadRange([p+R,p+R+8],{onSuccess:function(){S._loadAtom(u,p+R,y,b)},onError:b.onError})}}}},{key:"_isContainerAtom",value:function(u){return 0<=["moov","udta","meta","ilst"].indexOf(u)}},{key:"_canReadAtom",value:function(u){return u!=="----"}},{key:"_parseData",value:function(u,p){var y={};p=this._expandShortcutTags(p),this._readAtom(y,u,0,u.getSize(),p);for(var b in a)a.hasOwnProperty(b)&&(p=y[a[b]])&&(y[b]=b==="track"?p.data.track:p.data);return{type:"MP4",ftyp:u.getStringAt(8,4),version:u.getLongAt(12,!0),tags:y}}},{key:"_readAtom",value:function(u,p,y,b,S,R,C){C=C===void 0?"":C+"  ";for(var x=y;x<y+b;){var I=p.getLongAt(x,!0);if(I==0)break;var O=p.getStringAt(x+4,4);if(this._isContainerAtom(O)){O=="meta"&&(x+=4),this._readAtom(u,p,x+8,I-8,S,(R?R+".":"")+O,C);break}(!S||0<=S.indexOf(O))&&R==="moov.udta.meta.ilst"&&this._canReadAtom(O)&&(u[O]=this._readMetadataAtom(p,x)),x+=I}}},{key:"_readMetadataAtom",value:function(u,p){var y=u.getLongAt(p,!0),b=u.getStringAt(p+4,4),S=u.getInteger24At(p+16+1,!0);if(S=d[S],b=="trkn")var R={track:u.getShortAt(p+16+10,!0),total:u.getShortAt(p+16+14,!0)};else if(b=="disk")R={disk:u.getShortAt(p+16+10,!0),total:u.getShortAt(p+16+14,!0)};else{p+=24;var C=y-24;switch(b==="covr"&&S==="uint8"&&(S="jpeg"),S){case"text":R=u.getStringWithCharsetAt(p,C,"utf-8").toString();break;case"uint8":R=u.getShortAt(p,!1);break;case"int":case"uint":R=(S=="int"?C==1?u.getSByteAt:C==2?u.getSShortAt:C==4?u.getSLongAt:u.getLongAt:C==1?u.getByteAt:C==2?u.getShortAt:u.getLongAt).call(u,p+(C==8?4:0),!0);break;case"jpeg":case"png":R={format:"image/"+S,data:u.getBytesAt(p,C)}}}return{id:b,size:y,description:s[b]||"Unknown",data:R}}},{key:"getShortcuts",value:function(){return a}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(u){return String.fromCharCode.apply(String,u.slice(4,8))==="ftyp"}}]),i})(g);var d={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},s={"alb":"Album","ART":"Artist",aART:"Album Artist","day":"Release Date","nam":"Title","gen":"Genre",gnre:"Genre",trkn:"Track Number","wrt":"Composer","too":"Encoding Tool","enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","grp":"Grouping",keyw:"Keywords","lyr":"Lyrics","cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},a={title:"nam",artist:"ART",album:"alb",year:"day",comment:"cmt",track:"trkn",genre:"gen",picture:"covr",lyrics:"lyr"};c.exports=l},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(l,c,g){function v(m,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(m,r.key,r)}}function k(m,e,t){return e&&v(m.prototype,e),t&&v(m,t),m}function w(m,e,t){return e in m?Object.defineProperty(m,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):m[e]=t,m}var h=l("./StringUtils");l=(function(){function m(e){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");w(this,"_isInitialized",void 0),w(this,"_size",void 0),this._isInitialized=!1,this._size=0}return k(m,[{key:"init",value:function(e){var t=this;if(this._isInitialized)setTimeout(e.onSuccess,1);else return this._init({onSuccess:function(){t._isInitialized=!0,e.onSuccess()},onError:e.onError})}},{key:"_init",value:function(e){throw Error("Must implement init function")}},{key:"loadRange",value:function(e,t){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(e){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(e,t){for(var r=Array(t),d=0;d<t;d++)r[d]=this.getByteAt(e+d);return r}},{key:"isBitSetAt",value:function(e,t){return(this.getByteAt(e)&1<<t)!=0}},{key:"getSByteAt",value:function(e){return e=this.getByteAt(e),127<e?e-256:e}},{key:"getShortAt",value:function(e,t){return e=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e),0>e&&(e+=65536),e}},{key:"getSShortAt",value:function(e,t){return e=this.getShortAt(e,t),32767<e?e-65536:e}},{key:"getLongAt",value:function(e,t){var r=this.getByteAt(e),d=this.getByteAt(e+1),s=this.getByteAt(e+2);return e=this.getByteAt(e+3),t=t?(((r<<8)+d<<8)+s<<8)+e:(((e<<8)+s<<8)+d<<8)+r,0>t&&(t+=4294967296),t}},{key:"getSLongAt",value:function(e,t){return e=this.getLongAt(e,t),2147483647<e?e-4294967296:e}},{key:"getInteger24At",value:function(e,t){var r=this.getByteAt(e),d=this.getByteAt(e+1);return e=this.getByteAt(e+2),t=t?((r<<8)+d<<8)+e:((e<<8)+d<<8)+r,0>t&&(t+=16777216),t}},{key:"getStringAt",value:function(e,t){for(var r=[],d=e,s=0;d<e+t;d++,s++)r[s]=String.fromCharCode(this.getByteAt(d));return r.join("")}},{key:"getStringWithCharsetAt",value:function(e,t,r){switch(e=this.getBytesAt(e,t),(r||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":r=h.readUTF16String(e,r==="utf-16be");break;case"utf-8":r=h.readUTF8String(e);break;default:r=h.readNullTerminatedString(e)}return r}},{key:"getCharAt",value:function(e){return String.fromCharCode(this.getByteAt(e))}},{key:"getSynchsafeInteger32At",value:function(e){var t=this.getByteAt(e),r=this.getByteAt(e+1),d=this.getByteAt(e+2);return this.getByteAt(e+3)&127|(d&127)<<7|(r&127)<<14|(t&127)<<21}}],[{key:"canReadFile",value:function(e){throw Error("Must implement canReadFile function")}}]),m})(),c.exports=l},{"./StringUtils":13}],12:[function(l,c,g){function v(h,m){for(var e=0;e<m.length;e++){var t=m[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(h,t.key,t)}}function k(h,m,e){return m&&v(h.prototype,m),e&&v(h,e),h}function w(h,m,e){return m in h?Object.defineProperty(h,m,{value:e,enumerable:!0,configurable:!0,writable:!0}):h[m]=e,h}l("./MediaFileReader"),l=(function(){function h(m){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");w(this,"_mediaFileReader",void 0),w(this,"_tags",void 0),this._mediaFileReader=m,this._tags=null}return k(h,[{key:"setTagsToRead",value:function(m){return this._tags=m,this}},{key:"read",value:function(m){var e=this;this._mediaFileReader.init({onSuccess:function(){e._loadData(e._mediaFileReader,{onSuccess:function(){try{var t=e._parseData(e._mediaFileReader,e._tags)}catch(r){if(m.onError){m.onError({type:"parseData",info:r.message});return}}m.onSuccess(t)},onError:m.onError})},onError:m.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(m,e){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(m,e){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(m){if(!m)return null;for(var e=[],t=this.getShortcuts(),r=0,d;d=m[r];r++)e=e.concat(t[d]||[d]);return e}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(m){throw Error("Must implement")}}]),h})(),c.exports=l},{"./MediaFileReader":11}],13:[function(l,c,g){function v(m,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(m,r.key,r)}}function k(m,e,t){return e&&v(m.prototype,e),m}function w(m,e,t){return e in m?Object.defineProperty(m,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):m[e]=t,m}var h=(function(){function m(e,t){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");w(this,"_value",void 0),w(this,"bytesReadCount",void 0),w(this,"length",void 0),this._value=e,this.bytesReadCount=t,this.length=e.length}return k(m,[{key:"toString",value:function(){return this._value}}]),m})();c.exports={readUTF16String:function(m,e,t){var r=0,d=1,s=0;t=Math.min(t||m.length,m.length),m[0]==254&&m[1]==255?(e=!0,r=2):m[0]==255&&m[1]==254&&(e=!1,r=2),e&&(d=0,s=1),e=[];for(var a=0;r<t;a++){var n=m[r+d],i=(n<<8)+m[r+s];if(r+=2,i==0)break;216>n||224<=n?e[a]=String.fromCharCode(i):(n=(m[r+d]<<8)+m[r+s],r+=2,e[a]=String.fromCharCode(i,n))}return new h(e.join(""),r)},readUTF8String:function(m,e){var t=0;e=Math.min(e||m.length,m.length),m[0]==239&&m[1]==187&&m[2]==191&&(t=3);for(var r=[],d=0;t<e;d++){var s=m[t++];if(s==0)break;if(128>s)r[d]=String.fromCharCode(s);else if(194<=s&&224>s){var a=m[t++];r[d]=String.fromCharCode(((s&31)<<6)+(a&63))}else if(224<=s&&240>s){a=m[t++];var n=m[t++];r[d]=String.fromCharCode(((s&255)<<12)+((a&63)<<6)+(n&63))}else if(240<=s&&245>s){a=m[t++],n=m[t++];var i=m[t++];n=((s&7)<<18)+((a&63)<<12)+((n&63)<<6)+(i&63)-65536,r[d]=String.fromCharCode((n>>10)+55296,(n&1023)+56320)}}return new h(r.join(""),t)},readNullTerminatedString:function(m,e){var t=[];e=e||m.length;for(var r=0;r<e;){var d=m[r++];if(d==0)break;t[r-1]=String.fromCharCode(d)}return new h(t.join(""),r)}}},{}],14:[function(l,c,g){function v(n){"@babel/helpers - typeof";return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},v(n)}function k(n,i){for(var f=0;f<i.length;f++){var u=i[f];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function w(n,i,f){return i&&k(n.prototype,i),f&&k(n,f),n}function h(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),i&&m(n,i)}function m(n,i){return m=Object.setPrototypeOf||function(f,u){return f.__proto__=u,f},m(n,i)}function e(n){var i=r();return function(){var f=d(n);if(i){var u=d(this).constructor;f=Reflect.construct(f,arguments,u)}else f=f.apply(this,arguments);return f=!f||v(f)!=="object"&&typeof f!="function"?t(this):f,f}}function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(n){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},d(n)}function s(n,i,f){return i in n?Object.defineProperty(n,i,{value:f,enumerable:!0,configurable:!0,writable:!0}):n[i]=f,n}var a=l("./ChunkedFileData");g=(function(n){function i(u){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var p=f.call(this);return s(t(p),"_url",void 0),s(t(p),"_fileData",void 0),p._url=u,p._fileData=new a,p}h(i,n);var f=e(i);return w(i,[{key:"_init",value:function(u){i._config.avoidHeadRequests?this._fetchSizeWithGetRequest(u):this._fetchSizeWithHeadRequest(u)}},{key:"_fetchSizeWithHeadRequest",value:function(u){var p=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(y){(y=p._parseContentLength(y))?(p._size=y,u.onSuccess()):p._fetchSizeWithGetRequest(u)},onError:u.onError})}},{key:"_fetchSizeWithGetRequest",value:function(u){var p=this,y=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",y,{onSuccess:function(b){var S=p._parseContentRange(b);if(b=p._getXhrResponseContent(b),S){if(S.instanceLength==null){p._fetchEntireFile(u);return}p._size=S.instanceLength}else p._size=b.length;p._fileData.addData(0,b),u.onSuccess()},onError:u.onError})}},{key:"_fetchEntireFile",value:function(u){var p=this;this._makeXHRRequest("GET",null,{onSuccess:function(y){y=p._getXhrResponseContent(y),p._size=y.length,p._fileData.addData(0,y),u.onSuccess()},onError:u.onError})}},{key:"_getXhrResponseContent",value:function(u){return u.responseBody||u.responseText||""}},{key:"_parseContentLength",value:function(u){return u=this._getResponseHeader(u,"Content-Length"),u==null?u:parseInt(u,10)}},{key:"_parseContentRange",value:function(u){if(u=this._getResponseHeader(u,"Content-Range")){var p=u.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!p)throw Error("FIXME: Unknown Content-Range syntax: "+u);return{firstBytePosition:parseInt(p[1],10),lastBytePosition:parseInt(p[2],10),instanceLength:p[3]?parseInt(p[3],10):null}}return null}},{key:"loadRange",value:function(u,p){var y=this;y._fileData.hasDataRange(u[0],Math.min(y._size,u[1]))?setTimeout(p.onSuccess,1):(u=this._roundRangeToChunkMultiple(u),u[1]=Math.min(y._size,u[1]),this._makeXHRRequest("GET",u,{onSuccess:function(b){b=y._getXhrResponseContent(b),y._fileData.addData(u[0],b),p.onSuccess()},onError:p.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(u){return[u[0],u[0]+1024*Math.ceil((u[1]-u[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(u,p,y){var b=this._createXHRObject();b.open(u,this._url);var S=function(){b.status===200||b.status===206?y.onSuccess(b):y.onError&&y.onError({type:"xhr",info:"Unexpected HTTP status "+b.status+".",xhr:b}),b=null};typeof b.onload<"u"?(b.onload=S,b.onerror=function(){y.onError&&y.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:b})}):b.onreadystatechange=function(){b.readyState===4&&S()},i._config.timeoutInSec&&(b.timeout=1e3*i._config.timeoutInSec,b.ontimeout=function(){y.onError&&y.onError({type:"xhr",info:"Timeout after "+b.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:b})}),b.overrideMimeType("text/plain; charset=x-user-defined"),p&&this._setRequestHeader(b,"Range","bytes="+p[0]+"-"+p[1]),this._setRequestHeader(b,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),b.send(null)}},{key:"_setRequestHeader",value:function(u,p,y){0>i._config.disallowedXhrHeaders.indexOf(p.toLowerCase())&&u.setRequestHeader(p,y)}},{key:"_hasResponseHeader",value:function(u,p){if(u=u.getAllResponseHeaders(),!u)return!1;u=u.split(`\r
`);for(var y=[],b=0;b<u.length;b++)y[b]=u[b].split(":")[0].toLowerCase();return 0<=y.indexOf(p.toLowerCase())}},{key:"_getResponseHeader",value:function(u,p){return this._hasResponseHeader(u,p)?u.getResponseHeader(p):null}},{key:"getByteAt",value:function(u){return this._fileData.getByteAt(u).charCodeAt(0)&255}},{key:"_isWebWorker",value:function(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if(typeof window>"u"&&!this._isWebWorker())return new(l("xhr2")).XMLHttpRequest;if(typeof XMLHttpRequest<"u")return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(u){return typeof u=="string"&&/^[a-z]+:\/\//i.test(u)}},{key:"setConfig",value:function(u){for(var p in u)u.hasOwnProperty(p)&&(this._config[p]=u[p]);for(u=this._config.disallowedXhrHeaders,p=0;p<u.length;p++)u[p]=u[p].toLowerCase()}}]),i})(l("./MediaFileReader")),s(g,"_config",void 0),g._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},c.exports=g},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(l,c,g){function v(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function k(p,y){for(var b=0;b<y.length;b++){var S=y[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(p,S.key,S)}}function w(p,y,b){return y&&k(p.prototype,y),b&&k(p,b),p}function h(p,y,b){return y in p?Object.defineProperty(p,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):p[y]=b,p}function m(p,y){var b=0>p.offset&&(-p.offset>y||0<p.offset+p.length);return!(0<=p.offset&&p.offset+p.length>=y||b)}l("./MediaFileReader");var e=l("./XhrFileReader"),t=l("./BlobFileReader"),r=l("./ArrayFileReader");l("./MediaTagReader");var d=l("./ID3v1TagReader"),s=l("./ID3v2TagReader"),a=l("./MP4TagReader"),n=l("./FLACTagReader"),i=[],f=[],u=(function(){function p(y){v(this,p),h(this,"_file",void 0),h(this,"_tagsToRead",void 0),h(this,"_fileReader",void 0),h(this,"_tagReader",void 0),this._file=y}return w(p,[{key:"setTagsToRead",value:function(y){return this._tagsToRead=y,this}},{key:"setFileReader",value:function(y){return this._fileReader=y,this}},{key:"setTagReader",value:function(y){return this._tagReader=y,this}},{key:"read",value:function(y){var b=new(this._getFileReader())(this._file),S=this;b.init({onSuccess:function(){S._getTagReader(b,{onSuccess:function(R){new R(b).setTagsToRead(S._tagsToRead).read(y)},onError:y.onError})},onError:y.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var y=0;y<i.length;y++)if(i[y].canReadFile(this._file))return i[y];throw Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(y,b){if(this._tagReader){var S=this._tagReader;setTimeout(function(){b.onSuccess(S)},1)}else this._findTagReader(y,b)}},{key:"_findTagReader",value:function(y,b){for(var S=[],R=[],C=y.getSize(),x=0;x<f.length;x++){var I=f[x].getTagIdentifierByteRange();m(I,C)&&(0<=I.offset&&I.offset<C/2||0>I.offset&&I.offset<-C/2?S.push(f[x]):R.push(f[x]))}var O=!1;x={onSuccess:function(){if(O){for(var B=0;B<f.length;B++){var L=f[B].getTagIdentifierByteRange();if(m(L,C)){try{var F=y.getBytesAt(0<=L.offset?L.offset:L.offset+C,L.length)}catch(M){b.onError&&b.onError({type:"fileReader",info:M.message});return}if(f[B].canReadTagFormat(F)){b.onSuccess(f[B]);return}}}b.onError&&b.onError({type:"tagFormat",info:"No suitable tag reader found"})}else O=!0},onError:b.onError},this._loadTagIdentifierRanges(y,S,x),this._loadTagIdentifierRanges(y,R,x)}},{key:"_loadTagIdentifierRanges",value:function(y,b,S){if(b.length===0)setTimeout(S.onSuccess,1);else{for(var R=[Number.MAX_VALUE,0],C=y.getSize(),x=0;x<b.length;x++){var I=b[x].getTagIdentifierByteRange(),O=0<=I.offset?I.offset:I.offset+C;I=O+I.length-1,R[0]=Math.min(O,R[0]),R[1]=Math.max(I,R[1])}y.loadRange(R,S)}}}]),p})();g=(function(){function p(){v(this,p)}return w(p,null,[{key:"addFileReader",value:function(y){return i.push(y),p}},{key:"addTagReader",value:function(y){return f.push(y),p}},{key:"removeTagReader",value:function(y){return y=f.indexOf(y),0<=y&&f.splice(y,1),p}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){e.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(y){e.setConfig({disallowedXhrHeaders:y})}},{key:"setXhrTimeoutInSec",value:function(y){e.setConfig({timeoutInSec:y})}}]),p})(),g.addFileReader(e).addFileReader(t).addFileReader(r).addTagReader(s).addTagReader(d).addTagReader(a).addTagReader(n),typeof process>"u"||process.browser||(l=typeof navigator<"u"&&navigator.product==="ReactNative"?l("./ReactNativeFileReader"):l("./NodeFileReader"),g.addFileReader(l)),c.exports={read:function(p,y){new u(p).read(y)},Reader:u,Config:g}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)})})(J)),J.exports}var De=Fe();const He="AIzaSyD53qoAMqp4Wu9nHSyaBbCzUn1j0gYK5Cw",Ne="957252189604-cfmbh7s2rjbpbql8rcsrlc3bpu6m2cq5.apps.googleusercontent.com",je="https://www.googleapis.com/auth/drive",le="mp3p_music",D="https://i.pinimg.com/1200x/4a/86/34/4a86344f69940e6b166c0bcbde36c3bc.jpg",te="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";let se=null,_={token:sessionStorage.getItem("g_token"),rootId:null,albums:[],tracks:[],covers:{},trackCache:{},coverBlobCache:{},durationCache:{},albumColors:{},albumLogos:{},lyricsCache:{},syncedLyricsCache:{},playlist:[],currentIndex:-1,currentAlbum:null,playingFileId:null,playingAlbumId:null,isPlaying:!1,blobUrl:null,isLoadingTrack:!1,nextBlobUrl:null,nextBlobId:null,isPreloading:!1,currentLyrics:[],currentLyricIndex:-1,currentTrackLyrics:{plain:null,synced:null},lyricsCurtainOpen:!1,searchQuery:"",currentSound:null,currentBlobUrl:null};function Ue(A){const T=[/\s+feat\.?\s+/i,/\s+ft\.?\s+/i,/\s+featuring\s+/i,/\s+\(feat\.?\s+/i,/\s+\(ft\.?\s+/i,/\s+\[feat\.?\s+/i];for(const o of T)if(o.test(A)){const l=A.split(o),c=l[0].trim(),g=l[1].replace(/[\)\]]+$/,"").trim();return{mainArtist:c,features:g}}return{mainArtist:A.trim(),features:null}}async function Ge(A){return new Promise(T=>{De.read(A,{onSuccess:o=>{T({artist:o.tags.artist||"",title:o.tags.title||"",album:o.tags.album||""})},onError:o=>{console.warn("Metadata extraction failed:",o),T({artist:"",title:"",album:""})}})})}const $e=document.querySelector("#app");$e.innerHTML=`
  <header id="main-header">
    <div class="header-left">
      <button id="back-btn" class="secondary" style="display:none;">
        <span class="d-text">BACK</span>
        <span class="m-text">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="square" stroke-linejoin="miter">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </span>
      </button>
      <h1 id="page-title">MP3P</h1>
    </div>
    <div class="header-center">
      <div id="search-container" style="display:none;">
        <input type="text" id="search-input" placeholder="Search albums..." />
        <button id="clear-search"></button>
      </div>
    </div>
    <div class="header-right">
        <button id="edit-theme-btn" style="display:none;" title="Edit Album Colors"></button>
        <button id="search-btn" title="Search Albums">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>
        <button id="auth-btn">SYNC</button>
    </div>
  </header>
  
  <div id="main-view">
    <div style="padding:50px; text-align:center; color:#666; font-weight:700;">
      TAP <span style="color:#000; background:var(--yellow); padding:2px 6px;">SYNC</span> TO LOAD LIBRARY<br><br>
      (READING FOLDER: "${le}")
    </div>
  </div>

  <div id="theme-modal" class="modal-overlay">
    <div class="modal">
      <h3>Edit Album Theme</h3>
      <div class="color-group">
        <div class="color-row">
          <span>Main Line</span>
          <div class="color-picker-wrapper">
            <span class="hex-preview" id="hex-line"></span>
            <input type="color" id="input-line">
          </div>
        </div>
        <div class="color-row">
          <span>Title Text</span>
          <div class="color-picker-wrapper">
            <span class="hex-preview" id="hex-titleText"></span>
            <input type="color" id="input-titleText">
          </div>
        </div>
        <div class="color-row">
          <span>Title Background</span>
          <div class="color-picker-wrapper">
            <span class="hex-preview" id="hex-titleBg"></span>
            <input type="color" id="input-titleBg">
          </div>
        </div>
        <div class="color-row">
          <span>Font Color</span>
          <div class="color-picker-wrapper">
            <span class="hex-preview" id="hex-font"></span>
            <input type="color" id="input-font">
          </div>
        </div>
      </div>
      <div class="modal-actions">
        <button id="cancel-theme-btn" class="modal-btn cancel">Cancel</button>
        <button id="save-theme-btn" class="modal-btn">Save</button>
      </div>
    </div>
  </div>

  <div id="lyrics-curtain" class="lyrics-curtain">
    <div class="curtain-header-mobile">
      <img id="curtain-art" class="curtain-art" src="${te}">
      <div class="curtain-meta">
        <div id="curtain-title" class="curtain-title">NOT PLAYING</div>
        <div id="curtain-artist" class="curtain-artist">UNKNOWN</div>
      </div>
    </div>
    <div class="lyrics-curtain-content">
      <p class="lyrics-placeholder">No track playing</p>
    </div>
  </div>

  <div id="player-bar">
    <div class="p-art-box">
      <img id="p-art" class="p-art" src="${te}">
    </div>

    <div class="p-center">
      <div class="p-track-info">
        <span id="p-title" class="p-title">NOT PLAYING</span>
        <span id="p-artist" class="p-artist">SELECT A TRACK</span>
      </div>
      <div class="p-scrubber" id="p-scrubber">
        <div class="p-bar-bg" id="p-bar-bg">
          <div class="p-bar-fill" id="p-bar-fill"></div>
        </div>
      </div>
    </div>

    <div class="p-controls">
      <button class="ctrl-btn" id="btn-prev"></button>
      <button class="ctrl-btn play-btn" id="btn-play"></button>
      <button class="ctrl-btn" id="btn-next"></button>
      <button class="lyrics-toggle-btn" id="btn-lyrics-toggle">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path>
          <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
          <line x1="12" y1="19" x2="12" y2="23"></line>
          <line x1="8" y1="23" x2="16" y2="23"></line>
        </svg>
      </button>
    </div>
  </div>
`;const Re=document.getElementById("main-header"),P=document.getElementById("main-view"),re=document.getElementById("back-btn"),E=document.getElementById("page-title"),$=document.getElementById("p-title"),U=document.getElementById("p-artist"),W=document.getElementById("p-art"),H=document.getElementById("btn-play"),We=document.getElementById("btn-next"),Xe=document.getElementById("btn-prev"),j=document.getElementById("btn-lyrics-toggle"),qe=document.getElementById("p-scrubber"),ze=document.getElementById("p-bar-bg"),ue=document.getElementById("p-bar-fill"),we=document.getElementById("player-bar"),Se=document.querySelector(".p-art-box"),ke=document.getElementById("lyrics-curtain"),q=document.getElementById("curtain-art"),Ce=document.getElementById("curtain-title"),xe=document.getElementById("curtain-artist"),Ve=document.getElementById("search-btn"),z=document.getElementById("search-container"),V=document.getElementById("search-input"),Ye=document.getElementById("clear-search"),de=document.getElementById("edit-theme-btn"),pe=document.getElementById("theme-modal"),Z=document.getElementById("save-theme-btn"),Ke=document.getElementById("cancel-theme-btn"),_e=document.getElementById("input-line"),ye=document.getElementById("input-titleText"),me=document.getElementById("input-titleBg"),ge=document.getElementById("input-font");function oe(A,T){const o=document.getElementById(T);A.oninput=()=>{o.innerText=A.value}}oe(_e,"hex-line");oe(ye,"hex-titleText");oe(me,"hex-titleBg");oe(ge,"hex-font");W.onerror=()=>{W.src!==D&&(W.src=D)};q.onerror=()=>{q.src!==D&&(q.src=D)};de.onclick=()=>{if(!_.currentAlbum)return;const A=_.albumColors[_.currentAlbum.id]||{line:"#ffff64",titleText:"#000000",titleBg:"#ffff64",font:"#ffffff"};_e.value=A.line,ye.value=A.titleText,me.value=A.titleBg,ge.value=A.font,document.getElementById("hex-line").innerText=A.line,document.getElementById("hex-titleText").innerText=A.titleText,document.getElementById("hex-titleBg").innerText=A.titleBg,document.getElementById("hex-font").innerText=A.font,pe.classList.add("open")};Ke.onclick=()=>pe.classList.remove("open");Z.onclick=async()=>{if(!_.currentAlbum)return;Z.innerText="SAVING...";const A={font:ge.value,line:_e.value,titleBg:me.value,titleText:ye.value};let T="";try{const g=await gapi.client.drive.files.list({q:`name = 'title-logo.png' and '${_.currentAlbum.id}' in parents and trashed = false`,pageSize:1,fields:"files(id)"});if(g.result.files&&g.result.files.length>0)T=`logo: title-logo.png
`;else{const v=_.albumColors[_.currentAlbum.id];v&&v.logo&&(T=`logo: ${v.logo}
`)}}catch(g){console.error("Logo check failed",g);const v=_.albumColors[_.currentAlbum.id];v&&v.logo&&(T=`logo: ${v.logo}
`)}const o=`${T}font: ${A.font}
line: ${A.line}
titleBg: ${A.titleBg}
titleText: ${A.titleText}`,c=_.albumColors[_.currentAlbum.id]?.fileId;try{if(c)await fetch(`https://www.googleapis.com/upload/drive/v3/files/${c}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${_.token}`,"Content-Type":"text/plain"},body:o});else{const v={name:"colors.txt",parents:[_.currentAlbum.id]},k="-------314159265358979323846",w=`\r
--`+k+`\r
`,h=`\r
--`+k+"--",m=w+`Content-Type: application/json\r
\r
`+JSON.stringify(v)+w+`Content-Type: text/plain\r
\r
`+o+h;await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${_.token}`,"Content-Type":'multipart/related; boundary="'+k+'"'},body:m})}delete _.albumColors[_.currentAlbum.id];const g=await ie(_.currentAlbum.id);g&&(Ee(_.currentAlbum.id),(_.playingAlbumId===_.currentAlbum.id||!_.playingAlbumId)&&ee(g.line)),pe.classList.remove("open"),Z.innerText="SAVE",alert("Theme Updated!")}catch(g){console.error(g),Z.innerText="ERROR",alert("Failed to save theme.")}};j.onclick=()=>{_.lyricsCurtainOpen=!_.lyricsCurtainOpen,_.lyricsCurtainOpen?(ke.classList.add("open"),j.classList.add("active"),Oe(_.currentTrackLyrics)):(ke.classList.remove("open"),j.classList.remove("active"))};Ve.onclick=()=>{const A=z.style.display!=="none";z.style.display=A?"none":"flex",A?(_.searchQuery="",V.value="",K()):V.focus()};V.oninput=A=>{_.searchQuery=A.target.value.toLowerCase(),K()};Ye.onclick=()=>{_.searchQuery="",V.value="",z.style.display="none",K()};function Y(A){const T=A.replace(/\.[^/.]+$/,""),o=[/^(\d+)\.\s*/,/^(\d+)\s*-\s*/,/^(\d+)_\s*/,/^(\d+)\s+/];for(const l of o){const c=T.match(l);if(c)return{number:parseInt(c[1],10),cleanName:T.replace(l,"").trim()}}return{number:999,cleanName:T}}function Qe(A){const T=A.split(`
`),o=[];for(const l of T){const c=l.match(/^\[(\d+):(\d+)\.(\d+)\](.*)$/);if(c){const g=parseInt(c[1])*60+parseInt(c[2])+parseInt(c[3])/100;c[4].trim().length>0&&o.push({time:g,text:c[4].trim()})}}return o}function he(A){switch(A.split(".").pop()?.toLowerCase()){case"flac":return"audio/flac";case"m4a":return"audio/mp4";case"mp3":return"audio/mpeg";case"wav":return"audio/wav";case"ogg":return"audio/ogg";default:return"audio/mpeg"}}async function ie(A){if(_.albumColors[A])return _.albumColors[A];let T="",o;try{const g=await gapi.client.drive.files.list({q:`name = 'colors.txt' and '${A}' in parents and trashed = false`,fields:"files(id)",pageSize:1});if(g.result.files&&g.result.files.length>0){o=g.result.files[0].id;const v=await fetch(`https://www.googleapis.com/drive/v3/files/${o}?alt=media`,{headers:{Authorization:`Bearer ${_.token}`}});v.ok&&(T=await v.text())}}catch(g){console.error(g)}const l=(g,v)=>{const k=T.match(g);return k?k[1].trim():v},c={fileId:o,font:l(/^font:\s*(.+)$/im,"#ffffff"),line:l(/^line:\s*(.+)$/im,"#ffff64"),titleBg:l(/^titleBg:\s*(.+)$/im,"#ffff64"),titleText:l(/^titleText:\s*(.+)$/im,"#000000"),logo:l(/^logo:\s*(.+)$/im)};if(!c.logo)try{const g=await gapi.client.drive.files.list({q:`name = 'title-logo.png' and '${A}' in parents and trashed = false`,fields:"files(id)",pageSize:1});g.result.files&&g.result.files.length>0&&(c.logo="title-logo.png")}catch{}return _.albumColors[A]=c,!o&&!c.logo?(delete _.albumColors[A],null):(c.logo&&await Ze(A,c.logo),c)}async function Ze(A,T){try{const o=await gapi.client.drive.files.list({q:`name = '${T}' and '${A}' in parents and trashed = false`,fields:"files(id)",pageSize:1});if(!o.result.files||o.result.files.length===0)return;const l=o.result.files[0].id,c=await fetch(`https://www.googleapis.com/drive/v3/files/${l}?alt=media`,{headers:{Authorization:`Bearer ${_.token}`}});if(!c.ok)return;const g=await c.blob();_.albumLogos[A]=URL.createObjectURL(g)}catch(o){console.error("Error loading logo",o)}}async function Je(A,T,o){const l=`${T}-${o}-${A}`;if(_.syncedLyricsCache[l])return{plain:null,synced:_.syncedLyricsCache[l]};if(_.lyricsCache[l])return{plain:_.lyricsCache[l],synced:null};try{const c=await fetch(`https://lrclib.net/api/search?track_name=${encodeURIComponent(A)}`,{headers:{"User-Agent":"MP3P Music Player v1.0"}});if(!c.ok)return{plain:null,synced:null};const g=await c.json();if(!g||g.length===0)return{plain:null,synced:null};let v=g[0];for(const k of g)if(k.albumName&&o&&k.albumName.toLowerCase().includes(o.toLowerCase())){v=k;break}if(v.syncedLyrics){const k=Qe(v.syncedLyrics);return _.syncedLyricsCache[l]=k,{plain:null,synced:k}}else if(v.plainLyrics)return _.lyricsCache[l]=v.plainLyrics,{plain:v.plainLyrics,synced:null};return{plain:null,synced:null}}catch{return{plain:null,synced:null}}}async function et(A){if(!_.currentAlbum)return{plain:null,synced:null};const{cleanName:T}=Y(A);return await Je(T,_.currentAlbum.name,_.currentAlbum.name)}function Ie(A){const T=document.querySelector(".lyrics-content");T&&(A.synced&&A.synced.length>0?(_.currentLyrics=A.synced,_.currentLyricIndex=-1,T.innerHTML=A.synced.map((o,l)=>`<p class="lyric-line" data-index="${l}" data-time="${o.time}">${o.text.replace(/&/g,"&amp;").replace(/</g,"&lt;")}</p>`).join("")):A.plain?(_.currentLyrics=[],_.currentLyricIndex=-1,T.innerHTML=A.plain.split(`
`).map(o=>`<p>${o.trim()===""?"<br>":o.replace(/&/g,"&amp;")}</p>`).join("")):T.innerHTML='<p class="lyrics-placeholder">No lyrics available</p>')}function Oe(A){const T=document.querySelector(".lyrics-curtain-content");T&&(A.synced&&A.synced.length>0?T.innerHTML=A.synced.map((o,l)=>`<p class="lyric-line-curtain" data-index="${l}" data-time="${o.time}">${o.text.replace(/&/g,"&amp;").replace(/</g,"&lt;")}</p>`).join(""):A.plain?T.innerHTML=A.plain.split(`
`).map(o=>`<p>${o.trim()===""?"<br>":o.replace(/&/g,"&amp;")}</p>`).join(""):T.innerHTML='<p class="lyrics-placeholder">No lyrics available</p>')}function tt(A){if(_.currentLyrics.length===0)return;let T=-1;for(let l=_.currentLyrics.length-1;l>=0;l--)if(A>=_.currentLyrics[l].time){T=l;break}if(T===_.currentLyricIndex)return;_.currentLyricIndex=T;const o=(l,c)=>{if(!l)return;l.querySelectorAll(`.${c}`).forEach((v,k)=>{k===T?(v.classList.add("active"),v.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})):v.classList.remove("active")})};o(document.querySelector(".lyrics-content"),"lyric-line"),o(document.querySelector(".lyrics-curtain-content"),"lyric-line-curtain")}function Ee(A){const T=_.albumColors[A],o=_.albumLogos[A],l=_.albums.find(c=>c.id===A)?.name||"MP3P";T?(E.style.backgroundColor=T.titleBg,E.style.color=T.titleText,o?(E.classList.add("has-logo"),E.style.backgroundImage=`url("${o}")`,E.textContent="",E.style.padding="0 5px",E.setAttribute("aria-label",l)):(E.classList.remove("has-logo"),E.style.backgroundImage="",E.textContent=l.toUpperCase(),E.style.padding="0 5px")):(E.classList.remove("has-logo"),E.style.backgroundColor="",E.style.color="",E.style.backgroundImage="",E.textContent=l.toUpperCase(),E.style.padding="0 5px")}function ve(A){const T=A||_.playingAlbumId;if(!T){ee(null),E.classList.remove("has-logo"),E.style.backgroundColor="",E.style.color="",E.style.backgroundImage="",E.textContent="MP3P";return}const o=_.albumColors[T];if(o)ee(o.line),Ee(T);else{ee(null);const l=_.albums.find(c=>c.id===T)?.name||"MP3P";E.textContent=l.toUpperCase(),E.style.backgroundColor="",E.style.color=""}}function nt(){if(!_.playingAlbumId){we.style.borderTopColor="",ue.style.backgroundColor="",U.style.color="",H.style.backgroundColor="",H.style.borderColor="",H.style.color="",Se.style.backgroundColor="",j.style.borderColor="",j.style.color="";return}const A=_.albumColors[_.playingAlbumId];A&&(we.style.borderTopColor=A.line,ue.style.backgroundColor=A.line,U.style.color=A.line,H.style.backgroundColor=A.line,H.style.borderColor=A.line,H.style.color=A.titleText||"#000",Se.style.backgroundColor=A.line,j.style.borderColor=A.line,j.style.color=A.line,xe.style.color=A.line,Ce.style.color=A.font)}function ee(A){A?document.documentElement.style.setProperty("--yellow",A):document.documentElement.style.removeProperty("--yellow")}async function rt(A,T,o){if(_.durationCache[A]){const l=document.querySelector(`[data-index="${T}"]`);l&&(l.textContent=_.durationCache[A]);return}try{const l=await fetch(`https://www.googleapis.com/drive/v3/files/${A}?alt=media`,{headers:{Authorization:`Bearer ${_.token}`,Range:"bytes=0-204800"}});if(!l.ok)return;let c=await l.blob();const g=he(o);g==="audio/mp4"&&(c=c.slice(0,c.size,g));const v=URL.createObjectURL(c),k=new Audio(v);await new Promise((w,h)=>{const m=setTimeout(()=>{k.removeEventListener("loadedmetadata",e),URL.revokeObjectURL(v),h(new Error("Timeout"))},5e3),e=()=>{clearTimeout(m);const t=k.duration;if(t&&isFinite(t)){const r=Math.floor(t/60),d=Math.floor(t%60),s=`${r}:${d.toString().padStart(2,"0")}`;_.durationCache[A]=s;const a=document.querySelector(`[data-index="${T}"]`);a&&(a.textContent=s)}URL.revokeObjectURL(v),w()};k.addEventListener("loadedmetadata",e)})}catch(l){console.error("Duration load failed:",l)}}function ot(){const A=document.createElement("script");A.src="https://accounts.google.com/gsi/client",A.onload=at,document.body.append(A);const T=document.createElement("script");T.src="https://apis.google.com/js/api.js",T.onload=()=>gapi.load("client",it),document.body.append(T)}async function it(){await gapi.client.init({apiKey:He,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}),_.token&&Le()}function at(){const A=google.accounts.oauth2.initTokenClient({client_id:Ne,scope:je,callback:o=>{o.error||(_.token=o.access_token,sessionStorage.setItem("g_token",o.access_token),Le())}}),T=()=>A.requestAccessToken({prompt:""});document.getElementById("auth-btn").onclick=T,document.getElementById("page-title").onclick=T,re.onclick=()=>{z.style.display="none",_.searchQuery="",V.value="",K()}}async function ce(A,T){let o=[],l=null;do{const c=await gapi.client.drive.files.list({q:A,fields:`nextPageToken, files(${T})`,pageSize:1e3,pageToken:l});c.result.files&&(o=o.concat(c.result.files)),l=c.result.nextPageToken}while(l);return o}async function ne(A,T){if(_.coverBlobCache[T]){A.src=_.coverBlobCache[T];return}try{const o=await fetch(`https://www.googleapis.com/drive/v3/files/${T}?alt=media`,{headers:{Authorization:`Bearer ${_.token}`}});if(!o.ok)throw new Error;const l=await o.blob(),c=URL.createObjectURL(l);_.coverBlobCache[T]=c,A.src=c}catch{A.src=D}}async function Le(){if(_.token){gapi.client.setToken({access_token:_.token}),_.trackCache={},_.coverBlobCache={};try{P.innerHTML=`<div style="text-align:center; padding:50px; color:#666; font-weight:700;">SCANNING "${le}"...</div>`;const A=await gapi.client.drive.files.list({pageSize:1,fields:"files(id)",q:`name = '${le}' and mimeType = 'application/vnd.google-apps.folder' and trashed = false`});if(_.rootId=A.result.files?.[0]?.id,!_.rootId){P.innerHTML='<div style="text-align:center; padding:50px; color:var(--yellow); font-weight:700;">FOLDER NOT FOUND</div>';return}_.albums=await ce(`'${_.rootId}' in parents and mimeType = 'application/vnd.google-apps.folder' and trashed = false`,"id, name");const T=await ce("name = 'folder.jpg' and trashed = false","id, parents");_.covers={},T.forEach(o=>{o.parents?.[0]&&(_.covers[o.parents[0]]=o.id)}),_.playingAlbumId&&await ie(_.playingAlbumId),K()}catch{P.innerHTML='<div style="text-align:center; padding:50px; color:var(--yellow);">CONNECTION FAILED<br>TRY RESET</div>'}}}async function K(){if(re.style.display="none",de.style.display="none",Re.classList.remove("album-mode"),ve(null),_.albums.length===0){P.innerHTML='<div style="text-align:center; padding:50px; color:#666;">NO ALBUMS FOUND</div>';return}const A=_.searchQuery?_.albums.filter(o=>o.name.toLowerCase().includes(_.searchQuery)):_.albums;if(A.length===0){P.innerHTML=`<div style="text-align:center; padding:50px; color:#666;">NO ALBUMS MATCH "${_.searchQuery}"</div>`;return}const T=document.createElement("div");if(T.className="grid",A.forEach(o=>{const l=_.covers[o.id],c=document.createElement("div");c.className="album-card";const g=o.id===_.playingAlbumId?"album-title playing":"album-title";c.innerHTML=`<img class="album-cover" src="${te}"><div class="${g}">${o.name}</div>`;const v=c.querySelector("img");l?ne(v,l):v.src=D,c.onclick=()=>st(o),T.appendChild(c)}),P.innerHTML="",P.appendChild(T),_.playingAlbumId){const o=_.albumColors[_.playingAlbumId];o&&document.querySelectorAll(".album-title.playing").forEach(l=>{const c=l;c.style.color=o.font,c.style.borderBottomColor=o.line})}}async function st(A){if(_.currentAlbum=A,re.style.display="flex",de.style.display="flex",Re.classList.add("album-mode"),z.style.display="none",await ie(A.id),ve(A.id),_.trackCache[A.id]){_.tracks=_.trackCache[A.id],fe();return}P.innerHTML='<div style="text-align:center; padding:50px; color:#666; font-weight:700;">LOADING TRACKS...</div>';try{_.tracks=await ce(`'${A.id}' in parents and (mimeType contains 'audio/') and trashed = false`,"id, name, mimeType, size"),_.tracks.sort((T,o)=>Y(T.name).number-Y(o.name).number),_.trackCache[A.id]=_.tracks,fe()}catch{P.innerHTML="ERROR LOADING TRACKS"}}function fe(){const A=window.innerWidth>768,T=document.createElement("div");if(A){const o=document.createElement("div");o.className="album-view-desktop";const l=document.createElement("div");l.className="album-left",l.innerHTML=`<div class="album-art-large"><img src="${te}"></div><div class="album-info"><h2>${_.currentAlbum?.name}</h2><p class="track-count">${_.tracks.length} tracks</p></div>`;const c=l.querySelector("img"),g=_.currentAlbum&&_.covers[_.currentAlbum.id];g?ne(c,g):c.src=D;const v=document.createElement("div");v.className="album-middle",T.className="track-list-compact",v.appendChild(T);const k=document.createElement("div");k.className="album-right",k.id="lyrics-panel",k.innerHTML='<div class="lyrics-header">LYRICS</div><div class="lyrics-content"><p class="lyrics-placeholder">Select a track</p></div>',o.append(l,v,k),P.innerHTML="",P.appendChild(o),(_.currentTrackLyrics.plain||_.currentTrackLyrics.synced)&&setTimeout(()=>Ie(_.currentTrackLyrics),100)}else T.className="track-list",P.innerHTML="",P.appendChild(T);_.tracks.forEach((o,l)=>{const c=document.createElement("div");c.className="track-row",o.id===_.playingFileId&&c.classList.add("active");const{cleanName:v}=Y(o.name),k=o.name.split(".").pop()?.toUpperCase()||"AUDIO",w=_.durationCache[o.id]||"--:--";c.innerHTML=`<div class="track-left"><div class="track-num">${l+1}</div><div class="track-info"><div class="track-name">${v}</div></div></div><div class="track-right"><span class="track-tech tech-ext">${k}</span><span class="track-tech track-duration" data-index="${l}">${w}</span></div>`,c.onclick=()=>G(l),T.appendChild(c),_.durationCache[o.id]||rt(o.id,l,o.name)})}async function lt(A){if(A>=_.playlist.length)return;const T=_.playlist[A];if(_.nextBlobId!==T.id&&!_.isPreloading){_.isPreloading=!0,console.log(`Preloading next: ${T.name}`);try{const o=await fetch(`https://www.googleapis.com/drive/v3/files/${T.id}?alt=media`,{headers:{Authorization:`Bearer ${_.token}`,Accept:"audio/*"}});if(!o.ok)throw new Error("Preload fetch failed");let l=await o.blob();const c=he(T.name);c==="audio/mp4"&&(l=l.slice(0,l.size,c));const g=URL.createObjectURL(l);_.nextBlobId=T.id,_.nextBlobUrl=g}catch(o){console.error("Preload Error:",o)}finally{_.isPreloading=!1}}}async function G(A,T=0){if(_.isLoadingTrack)return;_.isLoadingTrack=!0,_.currentIndex=A,_.playlist=_.tracks;const o=_.playlist[A];_.playingFileId=o.id,_.currentAlbum&&(_.playingAlbumId=_.currentAlbum.id,await ie(_.currentAlbum.id),nt(),re.style.display==="none"&&ve(_.currentAlbum.id)),fe();const{cleanName:l}=Y(o.name);$.innerText="LOADING...",U.innerText="";const c=_.currentAlbum&&_.covers[_.currentAlbum.id];c?(ne(W,c),ne(q,c)):(W.src=D,q.src=D),_.currentSound&&(_.currentSound.unload(),_.currentSound=null),_.currentBlobUrl&&(URL.revokeObjectURL(_.currentBlobUrl),_.currentBlobUrl=null);let g=null,v=null;_.nextBlobId===o.id&&_.nextBlobUrl&&(console.log("Playing from Preload Cache!"),g=_.nextBlobUrl,_.nextBlobId=null,_.nextBlobUrl=null);const k=o.name.split(".").pop()?.toLowerCase()||"mp3";try{if(!g){const h=await fetch(`https://www.googleapis.com/drive/v3/files/${o.id}?alt=media`,{headers:{Authorization:`Bearer ${_.token}`,Accept:"audio/*"}});if(!h.ok)throw new Error(`HTTP ${h.status}`);let m=await h.blob();const e=he(o.name);v=m.slice(0,m.size,e),g=URL.createObjectURL(v)}if(v)try{const h=await Ge(v),{mainArtist:m,features:e}=Ue(h.artist||_.currentAlbum?.name||"Unknown Artist"),t=h.title||l;let r=m;e&&(r+=` feat. ${e}`);const d=h.album||_.currentAlbum?.name||"";$.innerText=t.toUpperCase(),U.innerText=r.toUpperCase(),Ce.innerText=t.toUpperCase(),xe.innerText=r.toUpperCase(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:t,artist:r,album:d,artwork:[{src:W.src,sizes:"512x512",type:"image/jpeg"}]}))}catch(h){console.warn("Metadata extraction failed, using fallback:",h),$.innerText=l.toUpperCase(),U.innerText=_.currentAlbum?.name.toUpperCase()||"UNKNOWN"}_.currentBlobUrl=g;const w=k!=="m4a";_.currentSound=new Pe.Howl({src:[g],format:[k==="m4a"?"mp4":k],html5:w,onload:()=>{_.isLoadingTrack=!1,_.isPlaying=!0,X(),ut()},onloaderror:(h,m)=>{console.error("Howler Load Error:",m),$.innerText="ERROR LOADING",_.isLoadingTrack=!1},onplayerror:(h,m)=>{console.error("Howler Play Error:",m),$.innerText="ERROR PLAYING"},onend:()=>{_.isPlaying=!1,X(),_.currentIndex<_.playlist.length-1&&G(_.currentIndex+1)}}),_.currentSound.play(),j.style.display="flex",et(o.name).then(h=>{_.currentTrackLyrics=h,h.synced&&h.synced.length>0?(_.currentLyrics=h.synced,_.currentLyricIndex=-1):(_.currentLyrics=[],_.currentLyricIndex=-1),document.querySelector(".lyrics-content")&&Ie(h),Oe(h)}).catch(()=>{_.currentTrackLyrics={plain:null,synced:null},_.currentLyrics=[],_.currentLyricIndex=-1})}catch(w){if(console.error("Playback Error:",w),_.isLoadingTrack=!1,T<2){setTimeout(()=>G(A,T+1),1e3);return}$.innerText="ERROR PLAYING",w.message?.includes("403")||w.message?.includes("401")?U.innerText="TOKEN EXPIRED - RESET":U.innerText="PLAYBACK FAILED"}"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{_.currentSound?.play(),_.isPlaying=!0,X()}),navigator.mediaSession.setActionHandler("pause",()=>{_.currentSound?.pause(),_.isPlaying=!1,X()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{_.currentIndex>0&&G(_.currentIndex-1)}),navigator.mediaSession.setActionHandler("nexttrack",()=>{_.currentIndex<_.playlist.length-1&&G(_.currentIndex+1)}))}function ut(){se&&clearInterval(se),se=window.setInterval(()=>{if(_.currentSound&&_.isPlaying){const A=_.currentSound.seek(),T=_.currentSound.duration();if(T>0){const o=A/T*100;ue.style.width=`${o}%`,A>T/2&&!_.nextBlobId&&lt(_.currentIndex+1)}tt(A)}},100)}function X(){H.textContent=_.isPlaying?"||":""}H.onclick=()=>{_.currentSound&&(_.currentSound.playing()?(_.currentSound.pause(),_.isPlaying=!1):(_.currentSound.play(),_.isPlaying=!0),X())};We.onclick=()=>{_.currentIndex<_.playlist.length-1&&G(_.currentIndex+1)};Xe.onclick=()=>{_.currentIndex>0&&G(_.currentIndex-1)};qe.onclick=A=>{if(!_.currentSound)return;const T=ze.getBoundingClientRect(),o=(A.clientX-T.left)/T.width;_.currentSound.seek(o*_.currentSound.duration())};ot();
